window.CLOSING_THE_LOOP_PROOFS={"meta":{"generatedAt":"2025-12-24T16:29:29.282Z","seed":"closing-the-loop-umap-v1","vectorSignature":{"schema":"Œ¶/v1","weights":{"A":1,"B":0.7,"C":0.3,"D":0.2},"seed":"closing-the-loop-umap-v1","umap":"umap-js","pins":{"umap":"umap-js"},"providers":{},"digest":"32746af722eac65de0b4273808375b9af9eca11386b05b8bd1d9222b71daefd0","phiDigest":"60eada82dead7ff4cd1a0b01a224fb95c73c44b573cf54be61937ec4001f7504"},"source":"lean/HeytingLean/ClosingTheLoop","notes":"UMAP embedding of ClosingTheLoop declarations (feature vectors derived from Lean source text)."},"items":[{"id":"HeytingLean.ClosingTheLoop.Cat.Admissible.Hom","name":"HeytingLean.ClosingTheLoop.Cat.Admissible.Hom","kind":"abbrev","path":"lean/HeytingLean/ClosingTheLoop/Cat/Admissible.lean","line":46,"family":"Cat","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":157},"snippet":"abbrev Hom : Type _ :=\n  Subobject (A ‚üπ B)\n\nnamespace Hom\n\nvariable (Hsub : Hom (C := C) (A := A) (B := B))","pos":{"x":0.021990300019144204,"y":0.32861407472649296},"pos3":{"x":0.981566774489501,"y":0.018841130063673668,"z":0.12531355718276244}},{"id":"HeytingLean.ClosingTheLoop.Cat.Admissible.Hom.Obj","name":"HeytingLean.ClosingTheLoop.Cat.Admissible.Hom.Obj","kind":"abbrev","path":"lean/HeytingLean/ClosingTheLoop/Cat/Admissible.lean","line":54,"family":"Cat","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":76},"snippet":"abbrev Obj : C :=\n  (Hsub : C)\n\n/-- The inclusion `Œπ : H(A,B) ‚Ü™ (A ‚üπ B)`. -/","pos":{"x":0.8836405590412293,"y":0.6533879737290548},"pos3":{"x":0.4488469421886593,"y":0.965420249519174,"z":0.8176876082656946}},{"id":"HeytingLean.ClosingTheLoop.Cat.Admissible.Hom.Œπ","name":"HeytingLean.ClosingTheLoop.Cat.Admissible.Hom.Œπ","kind":"abbrev","path":"lean/HeytingLean/ClosingTheLoop/Cat/Admissible.lean","line":58,"family":"Cat","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":382},"snippet":"abbrev Œπ : Obj (C := C) (A := A) (B := B) Hsub ‚ü∂ (A ‚üπ B) :=\n  Hsub.arrow\n\ninstance : Mono (Œπ (C := C) (A := A) (B := B) Hsub) := by\n  dsimp [Œπ]\n  infer_instance","pos":{"x":0.19844240277723377,"y":0.06267826708416224},"pos3":{"x":0.6831559276457738,"y":0.05192591965860762,"z":0.07223405034852629}},{"id":"HeytingLean.ClosingTheLoop.Cat.Admissible.SelectorObj","name":"HeytingLean.ClosingTheLoop.Cat.Admissible.SelectorObj","kind":"abbrev","path":"lean/HeytingLean/ClosingTheLoop/Cat/Admissible.lean","line":73,"family":"Cat","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":154},"snippet":"abbrev SelectorObj : C :=\n  Cat.SelectorObj (C := C) (B := B) (H := (Hsub : C))\n\n/-- Admissible selectors as a subobject `H(B, H(A,B)) ‚Ü™ (B ‚üπ H(A,B))`. -/","pos":{"x":0.013207114654973881,"y":0.37514555220871976},"pos3":{"x":0.9937429186496279,"y":0.030034296117941534,"z":0.14311411718312958}},{"id":"HeytingLean.ClosingTheLoop.Cat.Admissible.SelectorSub","name":"HeytingLean.ClosingTheLoop.Cat.Admissible.SelectorSub","kind":"abbrev","path":"lean/HeytingLean/ClosingTheLoop/Cat/Admissible.lean","line":77,"family":"Cat","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":177},"snippet":"abbrev SelectorSub : Type _ :=\n  Subobject (SelectorObj (C := C) (A := A) (B := B) Hsub)\n\n/-- Evaluation at a point `b : ùüô ‚ü∂ B` for selectors into the admissible hom-object. -/","pos":{"x":0.03877409636711329,"y":0.26025528334935266},"pos3":{"x":0.9453920798703674,"y":0.023604748402500444,"z":0.087313334438018}},{"id":"HeytingLean.ClosingTheLoop.Cat.Admissible.evalAt","name":"HeytingLean.ClosingTheLoop.Cat.Admissible.evalAt","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Cat/Admissible.lean","line":81,"family":"Cat","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":238},"snippet":"def evalAt (b : ùüô_ C ‚ü∂ B) : SelectorObj (C := C) (A := A) (B := B) Hsub ‚ü∂ (Hsub : C) :=\n  Cat.evalAt (C := C) (B := B) (H := (Hsub : C)) b\n\n/-- Evaluation at `b` restricted to admissible selectors (via the inclusion of the subobject). -/","pos":{"x":0.12213050378785095,"y":0.049510741290551226},"pos3":{"x":0.7595473954726688,"y":0.031003318670665116,"z":0.02546497720964046}},{"id":"HeytingLean.ClosingTheLoop.Cat.Admissible.evalAtSub","name":"HeytingLean.ClosingTheLoop.Cat.Admissible.evalAtSub","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Cat/Admissible.lean","line":85,"family":"Cat","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":258},"snippet":"def evalAtSub (b : ùüô_ C ‚ü∂ B) (SelSub : SelectorSub (C := C) (A := A) (B := B) Hsub) :\n    (SelSub : C) ‚ü∂ (Hsub : C) :=\n  SelSub.arrow ‚â´ evalAt (C := C) (A := A) (B := B) Hsub b\n\nend Selectors\n","pos":{"x":0.15923143982059254,"y":0.0558256209168748},"pos3":{"x":0.7340168421209534,"y":0.03479745666179939,"z":0.05296372923601103}},{"id":"HeytingLean.ClosingTheLoop.Cat.close","name":"HeytingLean.ClosingTheLoop.Cat.close","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Cat/ClosureOperator.lean","line":28,"family":"Cat","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":336},"snippet":"def close (ri : RightInverseAt (C := C) (B := B) (H := H) b) :\n    SelectorObj (C := C) B H ‚ü∂ SelectorObj (C := C) B H :=\n  evalAt (C := C) (B := B) (H := H) b ‚â´ ri.Œ≤\n\nnamespace close\n","pos":{"x":0.19639819485471632,"y":0.09158081499635412},"pos3":{"x":0.6735979251049407,"y":0.0701100557521131,"z":0.09577227492066855}},{"id":"HeytingLean.ClosingTheLoop.Cat.close.idem","name":"HeytingLean.ClosingTheLoop.Cat.close.idem","kind":"theorem","path":"lean/HeytingLean/ClosingTheLoop/Cat/ClosureOperator.lean","line":37,"family":"Cat","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":4,"tactics":3,"parenDepth":2,"length":633},"snippet":"theorem idem :\n    close (C := C) (B := B) (H := H) b ri ‚â´ close (C := C) (B := B) (H := H) b ri =\n      close (C := C) (B := B) (H := H) b ri := by\n  dsimp [close]\n  calc\n    (evalAt (C := C) (B := B) (H := H) b ‚â´ ri.Œ≤) ‚â´ (evalAt (C := C) (B := B) (H := H) b ‚â´ ri.Œ≤)","pos":{"x":0.3800176883078176,"y":0.29861236547036485},"pos3":{"x":0.5870565479346035,"y":0.4085735761697951,"z":0.33325932208731396}},{"id":"HeytingLean.ClosingTheLoop.Cat.idem_of_map_idem","name":"HeytingLean.ClosingTheLoop.Cat.idem_of_map_idem","kind":"theorem","path":"lean/HeytingLean/ClosingTheLoop/Cat/Concreteness.lean","line":39,"family":"Cat","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":2,"tactics":1,"parenDepth":1,"length":421},"snippet":"theorem idem_of_map_idem {X : C} (f : X ‚ü∂ X) (h : U.map f ‚â´ U.map f = U.map f) :\n    f ‚â´ f = f := by\n  apply (Functor.map_injective U)\n  simpa [Functor.map_comp] using h\n\nsection Yoneda","pos":{"x":0.7883653424943322,"y":0.47360134706987905},"pos3":{"x":0.4056686212887069,"y":0.7603732841375997,"z":0.6227640257110134}},{"id":"HeytingLean.ClosingTheLoop.Cat.idem_of_yoneda_map_idem","name":"HeytingLean.ClosingTheLoop.Cat.idem_of_yoneda_map_idem","kind":"theorem","path":"lean/HeytingLean/ClosingTheLoop/Cat/Concreteness.lean","line":52,"family":"Cat","features":{"implies":2,"not":0,"and":2,"or":0,"forall":0,"exists":0,"eq":2,"tactics":2,"parenDepth":3,"length":1108},"snippet":"theorem idem_of_yoneda_map_idem {X : C} (f : X ‚ü∂ X)\n    (h : (yoneda.map f) ‚â´ (yoneda.map f) = yoneda.map f) : f ‚â´ f = f := by\n  apply (Functor.map_injective (yoneda : C ‚•§ (C·µí·µñ ‚•§ Type v)))\n  simpa [Functor.map_comp] using h\n\nend Yoneda","pos":{"x":0.490159224423276,"y":0.06399554008204222},"pos3":{"x":0.4539188312343564,"y":0.5707116021341007,"z":0.31143710225515603}},{"id":"HeytingLean.ClosingTheLoop.pointUnder","name":"HeytingLean.ClosingTheLoop.pointUnder","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Cat/Concreteness.lean","line":83,"family":"pointUnder","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":202},"snippet":"def pointUnder (unitEquiv : U‚ÇÄ.obj (ùüô_ C) ‚âÉ PUnit) : U‚ÇÄ.obj B :=\n  U‚ÇÄ.map b (unitEquiv.symm PUnit.unit)\n\n/-- A minimal comparison package expressing that a functor `U‚ÇÄ : C ‚•§ Type` preserves just enough","pos":{"x":0.07511414854378151,"y":0.15781209710446295},"pos3":{"x":0.8766128222711048,"y":0.05537041893843125,"z":0.04425353966999932}},{"id":"HeytingLean.ClosingTheLoop.to","name":"HeytingLean.ClosingTheLoop.to","kind":"structure","path":"lean/HeytingLean/ClosingTheLoop/Cat/Concreteness.lean","line":87,"family":"to","features":{"implies":0,"not":1,"and":2,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":0,"length":288},"snippet":"structure to interpret the selector object as a function space and evaluation at `b` as\nevaluation of functions.\n\nThis is intentionally *not* a global ‚Äúpreserves exponentials‚Äù typeclass: it records exactly the\ncomparison data and the single compatibility equation used in this project. -/","pos":{"x":0.5541242943516206,"y":0.11029549559446496},"pos3":{"x":0.42189346608894246,"y":0.6178005182698327,"z":0.3631627143993183}},{"id":"HeytingLean.ClosingTheLoop.PreservesSelectorEval","name":"HeytingLean.ClosingTheLoop.PreservesSelectorEval","kind":"structure","path":"lean/HeytingLean/ClosingTheLoop/Cat/Concreteness.lean","line":92,"family":"PreservesSelectorEval","features":{"implies":2,"not":0,"and":1,"or":0,"forall":0,"exists":0,"eq":2,"tactics":0,"parenDepth":2,"length":769},"snippet":"structure PreservesSelectorEval where\n  /-- Identify `U‚ÇÄ(ùüô)` with the singleton type to extract points from global elements. -/\n  unitEquiv : U‚ÇÄ.obj (ùüô_ C) ‚âÉ PUnit\n  /-- Identify `U‚ÇÄ(H^B)` with the function space `U‚ÇÄ(B) ‚Üí U‚ÇÄ(H)`. -/\n  expEquiv : U‚ÇÄ.obj (SelectorObj (C := C) B H) ‚âÉ (U‚ÇÄ.obj B ‚Üí U‚ÇÄ.obj H)\n  /-- Compatibility: `U‚ÇÄ.map (evalAt b)` is evaluation at the induced point of `U‚ÇÄ(B)`. -/","pos":{"x":0.5053794496046653,"y":0.08780014594667168},"pos3":{"x":0.45535495821842187,"y":0.5911273952893514,"z":0.31566839516812595}},{"id":"HeytingLean.ClosingTheLoop.map_close_eq","name":"HeytingLean.ClosingTheLoop.map_close_eq","kind":"theorem","path":"lean/HeytingLean/ClosingTheLoop/Cat/Concreteness.lean","line":105,"family":"map_close_eq","features":{"implies":2,"not":0,"and":1,"or":0,"forall":0,"exists":0,"eq":6,"tactics":3,"parenDepth":4,"length":1137},"snippet":"theorem map_close_eq (unitEquiv : U‚ÇÄ.obj (ùüô_ C) ‚âÉ PUnit)\n    (expEquiv : U‚ÇÄ.obj (SelectorObj (C := C) B H) ‚âÉ (U‚ÇÄ.obj B ‚Üí U‚ÇÄ.obj H))\n    (h_eval :\n      U‚ÇÄ.map (evalAt (C := C) (B := B) (H := H) b) =\n        fun x => expEquiv x (pointUnder (C := C) (B := B) (U‚ÇÄ := U‚ÇÄ) b unitEquiv))\n    (ri : RightInverseAt (C := C) (B := B) (H := H) b)","pos":{"x":0.46657150226593397,"y":0.1021398755645357},"pos3":{"x":0.4887288172149249,"y":0.5124013011991663,"z":0.3143981568552698}},{"id":"HeytingLean.ClosingTheLoop.map_close_eq'","name":"HeytingLean.ClosingTheLoop.map_close_eq'","kind":"theorem","path":"lean/HeytingLean/ClosingTheLoop/Cat/Concreteness.lean","line":126,"family":"map_close_eq'","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":0,"parenDepth":4,"length":619},"snippet":"theorem map_close_eq' (p : PreservesSelectorEval (C := C) (B := B) (H := H) (b := b) U‚ÇÄ)\n    (ri : RightInverseAt (C := C) (B := B) (H := H) b)\n    (f : U‚ÇÄ.obj B ‚Üí U‚ÇÄ.obj H) :\n    p.expEquiv (U‚ÇÄ.map (close (C := C) (B := B) (H := H) b ri) (p.expEquiv.symm f)) =\n      p.expEquiv (U‚ÇÄ.map ri.Œ≤ (f (pointUnder (C := C) (B := B) (U‚ÇÄ := U‚ÇÄ) b p.unitEquiv))) := by\n  simpa [p.map_evalAt] using","pos":{"x":0.2652053307126393,"y":0.020518742615568335},"pos3":{"x":0.6322944116650981,"y":0.2581617690359788,"z":0.09857635253883541}},{"id":"HeytingLean.ClosingTheLoop.Cat.EvalImage.Obj","name":"HeytingLean.ClosingTheLoop.Cat.EvalImage.Obj","kind":"abbrev","path":"lean/HeytingLean/ClosingTheLoop/Cat/EvalImage.lean","line":39,"family":"Cat","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":285},"snippet":"abbrev Obj (C : Type u) [Category.{v} C] [CartesianMonoidalCategory C]\n    (B H : C) [CategoryTheory.Exponentiable B] (b : ùüô_ C ‚ü∂ B)\n    [HasImage (evalAt (C := C) (B := B) (H := H) b)] : C :=\n  image (evalAt (C := C) (B := B) (H := H) b)\n\n/-- The inclusion `image (evalAt b) ‚ü∂ H`. -/","pos":{"x":0.17283864919397032,"y":0.0931016342155051},"pos3":{"x":0.7164866484001657,"y":0.06924824287847003,"z":0.07991379482257291}},{"id":"HeytingLean.ClosingTheLoop.Cat.EvalImage.Œπ","name":"HeytingLean.ClosingTheLoop.Cat.EvalImage.Œπ","kind":"abbrev","path":"lean/HeytingLean/ClosingTheLoop/Cat/EvalImage.lean","line":45,"family":"Cat","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":381},"snippet":"abbrev Œπ (C : Type u) [Category.{v} C] [CartesianMonoidalCategory C]\n    (B H : C) [CategoryTheory.Exponentiable B] (b : ùüô_ C ‚ü∂ B)\n    [HasImage (evalAt (C := C) (B := B) (H := H) b)] :\n    Obj (C := C) (B := B) (H := H) b ‚ü∂ H :=\n  image.Œπ (evalAt (C := C) (B := B) (H := H) b)\n","pos":{"x":0.19810286384461467,"y":0.07744466339111243},"pos3":{"x":0.6707264882592366,"y":0.09623267234973232,"z":0.10111280019335606}},{"id":"HeytingLean.ClosingTheLoop.Cat.EvalImage.betaOnImage","name":"HeytingLean.ClosingTheLoop.Cat.EvalImage.betaOnImage","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Cat/EvalImage.lean","line":53,"family":"Cat","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":1,"parenDepth":3,"length":339},"snippet":"def betaOnImage (C : Type u) [Category.{v} C] [CartesianMonoidalCategory C]\n    (B H : C) [CategoryTheory.Exponentiable B] (b : ùüô_ C ‚ü∂ B)\n    [Mono (evalAt (C := C) (B := B) (H := H) b)] :\n    Obj (C := C) (B := B) (H := H) b ‚ü∂ SelectorObj (C := C) B H :=\n  (imageMonoIsoSource (evalAt (C := C) (B := B) (H := H) b)).hom\n","pos":{"x":0.23136742244511496,"y":0.0077847780574014066},"pos3":{"x":0.6620951447703264,"y":0.21531984890330308,"z":0.07109736267025525}},{"id":"HeytingLean.ClosingTheLoop.Cat.EvalImage.betaOnImage_evalAt","name":"HeytingLean.ClosingTheLoop.Cat.EvalImage.betaOnImage_evalAt","kind":"theorem","path":"lean/HeytingLean/ClosingTheLoop/Cat/EvalImage.lean","line":60,"family":"Cat","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":1,"parenDepth":2,"length":326},"snippet":"  theorem betaOnImage_evalAt [Mono (evalAt (C := C) (B := B) (H := H) b)] :\n      betaOnImage (C := C) (B := B) (H := H) b ‚â´ evalAt (C := C) (B := B) (H := H) b =\n        Œπ (C := C) (B := B) (H := H) b := by\n  simp [betaOnImage, Œπ]\n\n/-- Under mono, the source factors through the image via the `imageMonoIsoSource` inverse. -/","pos":{"x":0.2385533263556008,"y":0.21685122320424488},"pos3":{"x":0.7114900344331548,"y":0.19281917980215232,"z":0.21151798119791773}},{"id":"HeytingLean.ClosingTheLoop.Cat.EvalImage.factorThruImage_eq_inv","name":"HeytingLean.ClosingTheLoop.Cat.EvalImage.factorThruImage_eq_inv","kind":"theorem","path":"lean/HeytingLean/ClosingTheLoop/Cat/EvalImage.lean","line":66,"family":"Cat","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":2,"parenDepth":3,"length":401},"snippet":"theorem factorThruImage_eq_inv [Mono (evalAt (C := C) (B := B) (H := H) b)] :\n    factorThruImage (evalAt (C := C) (B := B) (H := H) b) =\n      (imageMonoIsoSource (evalAt (C := C) (B := B) (H := H) b)).inv := by\n  -- Both maps compose with `image.Œπ` to give `evalAt`.\n  apply (cancel_mono (Œπ (C := C) (B := B) (H := H) b)).1\n  simp [Œπ]","pos":{"x":0.2744218877557749,"y":0.04857888464798516},"pos3":{"x":0.6424148650533497,"y":0.24654493841282574,"z":0.10904167712596534}},{"id":"HeytingLean.ClosingTheLoop.Cat.InjectiveEvalAt","name":"HeytingLean.ClosingTheLoop.Cat.InjectiveEvalAt","kind":"structure","path":"lean/HeytingLean/ClosingTheLoop/Cat/InverseEvaluation.lean","line":28,"family":"Cat","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":175},"snippet":"structure InjectiveEvalAt : Prop where\n  mono : Mono (evalAt (C := C) (B := B) (H := H) b)\n\n/-- Categorical analogue of a chosen right inverse: a section `Œ≤` of `evalAt b`. -/","pos":{"x":0.03185559863356706,"y":0.28529663491833573},"pos3":{"x":0.9612012393095933,"y":0.03968856029191246,"z":0.10055992912362971}},{"id":"HeytingLean.ClosingTheLoop.Cat.InverseEvaluationAt","name":"HeytingLean.ClosingTheLoop.Cat.InverseEvaluationAt","kind":"structure","path":"lean/HeytingLean/ClosingTheLoop/Cat/InverseEvaluation.lean","line":32,"family":"Cat","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":0,"parenDepth":1,"length":132},"snippet":"structure InverseEvaluationAt where\n  Œ≤ : H ‚ü∂ SelectorObj (C := C) B H\n  right_inv : Œ≤ ‚â´ evalAt (C := C) (B := B) (H := H) b = ùüô H\n","pos":{"x":0.8258851058789417,"y":0.5709404238927843},"pos3":{"x":0.4241406862434315,"y":0.8363636567363053,"z":0.76189808427501}},{"id":"HeytingLean.ClosingTheLoop.Cat.RightInverseAt","name":"HeytingLean.ClosingTheLoop.Cat.RightInverseAt","kind":"abbrev","path":"lean/HeytingLean/ClosingTheLoop/Cat/InverseEvaluation.lean","line":36,"family":"Cat","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":344},"snippet":"abbrev RightInverseAt {C : Type u} [Category.{v} C] [CartesianMonoidalCategory C]\n    {B H : C} [CategoryTheory.Exponentiable B] (b : ùüô_ C ‚ü∂ B) : Type _ :=\n  InverseEvaluationAt (C := C) (B := B) (H := H) b\n\nnamespace InverseEvaluationAt\n","pos":{"x":0.8713562853017786,"y":0.4482263905516738},"pos3":{"x":0.38046949283938697,"y":0.9114499126284862,"z":0.6569224027114815}},{"id":"HeytingLean.ClosingTheLoop.Cat.InverseEvaluationAt.of_isIso_evalAt","name":"HeytingLean.ClosingTheLoop.Cat.InverseEvaluationAt.of_isIso_evalAt","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Cat/InverseEvaluation.lean","line":45,"family":"Cat","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":1,"parenDepth":2,"length":319},"snippet":"noncomputable def of_isIso_evalAt [IsIso (evalAt (C := C) (B := B) (H := H) b)] :\n    InverseEvaluationAt (C := C) (B := B) (H := H) b where\n  Œ≤ := inv (evalAt (C := C) (B := B) (H := H) b)\n  right_inv := by\n    simp\n","pos":{"x":0.2060805506112832,"y":0.13482637225111896},"pos3":{"x":0.6832495171025311,"y":0.08789725952912035,"z":0.12836399253814734}},{"id":"HeytingLean.ClosingTheLoop.Cat.InverseEvaluationAt.of_splitEpi_evalAt","name":"HeytingLean.ClosingTheLoop.Cat.InverseEvaluationAt.of_splitEpi_evalAt","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Cat/InverseEvaluation.lean","line":52,"family":"Cat","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":3,"length":240},"snippet":"def of_splitEpi_evalAt (s : SplitEpi (evalAt (C := C) (B := B) (H := H) b)) :\n    InverseEvaluationAt (C := C) (B := B) (H := H) b where\n  Œ≤ := s.section_\n  right_inv := s.id\n\n/-- `evalAt b` is a split epimorphism under `RightInverseAt`. -/","pos":{"x":0.2216689074231544,"y":0},"pos3":{"x":0.6870837234822956,"y":0.18864575057613336,"z":0.05814757638585567}},{"id":"HeytingLean.ClosingTheLoop.Cat.InverseEvaluationAt.evalAt_splitEpi","name":"HeytingLean.ClosingTheLoop.Cat.InverseEvaluationAt.evalAt_splitEpi","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Cat/InverseEvaluation.lean","line":58,"family":"Cat","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":223},"snippet":"def evalAt_splitEpi (ri : InverseEvaluationAt (C := C) (B := B) (H := H) b) :\n    SplitEpi (evalAt (C := C) (B := B) (H := H) b) where\n  section_ := ri.Œ≤\n  id := ri.right_inv\n\n/-- The section `Œ≤` is a split monomorphism. -/","pos":{"x":0.1001564711170777,"y":0.06115828426247955},"pos3":{"x":0.8037137197673018,"y":0.06267949624083634,"z":0.03571514259201172}},{"id":"HeytingLean.ClosingTheLoop.Cat.InverseEvaluationAt.beta_splitMono","name":"HeytingLean.ClosingTheLoop.Cat.InverseEvaluationAt.beta_splitMono","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Cat/InverseEvaluation.lean","line":64,"family":"Cat","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":205},"snippet":"def beta_splitMono (ri : InverseEvaluationAt (C := C) (B := B) (H := H) b) : SplitMono ri.Œ≤ where\n  retraction := evalAt (C := C) (B := B) (H := H) b\n  id := ri.right_inv\n\n/-- Every split epi is an epi. -/","pos":{"x":0.09368315399644711,"y":0.11166469310945254},"pos3":{"x":0.8628884827010368,"y":0.04217610586383009,"z":0.0488401718414386}},{"id":"HeytingLean.ClosingTheLoop.Cat.InverseEvaluationAt.evalAt_epi","name":"HeytingLean.ClosingTheLoop.Cat.InverseEvaluationAt.evalAt_epi","kind":"theorem","path":"lean/HeytingLean/ClosingTheLoop/Cat/InverseEvaluation.lean","line":69,"family":"Cat","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":224},"snippet":"theorem evalAt_epi (ri : InverseEvaluationAt (C := C) (B := B) (H := H) b) :\n    Epi (evalAt (C := C) (B := B) (H := H) b) :=\n  (evalAt_splitEpi (C := C) (B := B) (H := H) (b := b) ri).epi\n\n/-- Every split mono is a mono. -/","pos":{"x":0.12408308994961838,"y":0.08921055384363046},"pos3":{"x":0.7881681524462765,"y":0.019498967971546755,"z":0.0052734177366410145}},{"id":"HeytingLean.ClosingTheLoop.Cat.InverseEvaluationAt.beta_mono","name":"HeytingLean.ClosingTheLoop.Cat.InverseEvaluationAt.beta_mono","kind":"theorem","path":"lean/HeytingLean/ClosingTheLoop/Cat/InverseEvaluation.lean","line":74,"family":"Cat","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":217},"snippet":"theorem beta_mono (ri : InverseEvaluationAt (C := C) (B := B) (H := H) b) : Mono ri.Œ≤ :=\n  (beta_splitMono (C := C) (B := B) (H := H) (b := b) ri).mono\n\nend InverseEvaluationAt\n\nnamespace RightInverseAt","pos":{"x":0.11520996284988058,"y":0.11709924420420122},"pos3":{"x":0.8212873464193439,"y":0.030959583577775514,"z":0.04158716993169069}},{"id":"HeytingLean.ClosingTheLoop.Cat.RightInverseAt.evalAt_splitEpi","name":"HeytingLean.ClosingTheLoop.Cat.RightInverseAt.evalAt_splitEpi","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Cat/InverseEvaluation.lean","line":83,"family":"Cat","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":204},"snippet":"def evalAt_splitEpi (ri : RightInverseAt (C := C) (B := B) (H := H) b) :\n    SplitEpi (evalAt (C := C) (B := B) (H := H) b) :=\n  InverseEvaluationAt.evalAt_splitEpi (C := C) (B := B) (H := H) (b := b) ri\n","pos":{"x":0.08552280892223958,"y":0.1342015200669292},"pos3":{"x":0.8742608108642496,"y":0.021562995277893134,"z":0.06165876771891984}},{"id":"HeytingLean.ClosingTheLoop.Cat.RightInverseAt.beta_splitMono","name":"HeytingLean.ClosingTheLoop.Cat.RightInverseAt.beta_splitMono","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Cat/InverseEvaluation.lean","line":87,"family":"Cat","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":166},"snippet":"def beta_splitMono (ri : RightInverseAt (C := C) (B := B) (H := H) b) : SplitMono ri.Œ≤ :=\n  InverseEvaluationAt.beta_splitMono (C := C) (B := B) (H := H) (b := b) ri\n","pos":{"x":0.025521596390981265,"y":0.33898109051942005},"pos3":{"x":0.9750138985321225,"y":0.03301205938818185,"z":0.1228877212233204}},{"id":"HeytingLean.ClosingTheLoop.Cat.RightInverseAt.evalAt_epi","name":"HeytingLean.ClosingTheLoop.Cat.RightInverseAt.evalAt_epi","kind":"theorem","path":"lean/HeytingLean/ClosingTheLoop/Cat/InverseEvaluation.lean","line":90,"family":"Cat","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":193},"snippet":"theorem evalAt_epi (ri : RightInverseAt (C := C) (B := B) (H := H) b) :\n    Epi (evalAt (C := C) (B := B) (H := H) b) :=\n  InverseEvaluationAt.evalAt_epi (C := C) (B := B) (H := H) (b := b) ri\n","pos":{"x":0.06301228126866572,"y":0.19378054945498072},"pos3":{"x":0.9041201972189916,"y":0.05414677573298407,"z":0.06110941230735735}},{"id":"HeytingLean.ClosingTheLoop.Cat.RightInverseAt.beta_mono","name":"HeytingLean.ClosingTheLoop.Cat.RightInverseAt.beta_mono","kind":"theorem","path":"lean/HeytingLean/ClosingTheLoop/Cat/InverseEvaluation.lean","line":94,"family":"Cat","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":219},"snippet":"theorem beta_mono (ri : RightInverseAt (C := C) (B := B) (H := H) b) : Mono ri.Œ≤ :=\n  InverseEvaluationAt.beta_mono (C := C) (B := B) (H := H) (b := b) ri\n\nend RightInverseAt\n\nend Cat","pos":{"x":0.10164589720367845,"y":0.09106653293292663},"pos3":{"x":0.8228061187221347,"y":0.0502965586302478,"z":0.022473747067840163}},{"id":"HeytingLean.ClosingTheLoop.Cat.SelectorObj","name":"HeytingLean.ClosingTheLoop.Cat.SelectorObj","kind":"abbrev","path":"lean/HeytingLean/ClosingTheLoop/Cat/Selector.lean","line":31,"family":"Cat","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":0,"length":93},"snippet":"abbrev SelectorObj : C :=\n  B ‚üπ H\n\n/-- Evaluation at a chosen global element `b : ùüô ‚ü∂ B`. -/","pos":{"x":0.9648885575955715,"y":0.9784994173114827},"pos3":{"x":0,"y":0.9028104385259796,"z":0.9712886237253837}},{"id":"HeytingLean.ClosingTheLoop.Cat.evalAt","name":"HeytingLean.ClosingTheLoop.Cat.evalAt","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Cat/Selector.lean","line":35,"family":"Cat","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":134},"snippet":"def evalAt (b : ùüô_ C ‚ü∂ B) : SelectorObj (C := C) B H ‚ü∂ H :=\n  (Œª_ (B ‚üπ H)).inv ‚â´ (b ‚äó‚Çò ùüô (B ‚üπ H)) ‚â´ (CategoryTheory.exp.ev B).app H\n","pos":{"x":0.004102304959947056,"y":0.361978460304915},"pos3":{"x":1,"y":0.049769525401744334,"z":0.1607967116127696}},{"id":"HeytingLean.ClosingTheLoop.Cat.evalAt_def","name":"HeytingLean.ClosingTheLoop.Cat.evalAt_def","kind":"lemma","path":"lean/HeytingLean/ClosingTheLoop/Cat/Selector.lean","line":38,"family":"Cat","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":0,"parenDepth":2,"length":207},"snippet":"lemma evalAt_def (b : ùüô_ C ‚ü∂ B) :\n    evalAt (C := C) (B := B) (H := H) b =\n      (Œª_ (B ‚üπ H)).inv ‚â´ (b ‚äó‚Çò ùüô (B ‚üπ H)) ‚â´ (CategoryTheory.exp.ev B).app H :=\n  rfl\n\nend Cat","pos":{"x":0.15672582115834802,"y":0.2692570448627616},"pos3":{"x":0.8227106954397285,"y":0.10488073021725104,"z":0.17382385833982528}},{"id":"HeytingLean.ClosingTheLoop.Cat.curryEquiv","name":"HeytingLean.ClosingTheLoop.Cat.curryEquiv","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Cat/YonedaView.lean","line":29,"family":"Cat","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":4,"parenDepth":2,"length":346},"snippet":"def curryEquiv :\n    (B ‚äó X ‚ü∂ H) ‚âÉ (X ‚ü∂ SelectorObj (C := C) B H) where\n  toFun := CategoryTheory.CartesianClosed.curry (A := B) (Y := X) (X := H)\n  invFun := CategoryTheory.CartesianClosed.uncurry (A := B) (Y := X) (X := H)\n  left_inv := by\n    intro f","pos":{"x":0.2784276671881117,"y":0.1999087935573777},"pos3":{"x":0.6459140059572611,"y":0.12844425530961734,"z":0.2256754706687612}},{"id":"HeytingLean.ClosingTheLoop.Cat.homTensorLeft","name":"HeytingLean.ClosingTheLoop.Cat.homTensorLeft","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Cat/YonedaViewNat.lean","line":33,"family":"Cat","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":2,"length":273},"snippet":"def homTensorLeft (B H : C) : C·µí·µñ ‚•§ Type v where\n  obj X := (B ‚äó (Opposite.unop X) ‚ü∂ H)\n  map {X Y} f g := (B ‚óÅ f.unop) ‚â´ g\n  map_id X := by\n    ext g\n    simp","pos":{"x":0.22178903228997796,"y":0.1612449781622081},"pos3":{"x":0.68626002539765,"y":0.09254485625520066,"z":0.16992258197590257}},{"id":"HeytingLean.ClosingTheLoop.Cat.homSelectorObj","name":"HeytingLean.ClosingTheLoop.Cat.homSelectorObj","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Cat/YonedaViewNat.lean","line":44,"family":"Cat","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":2,"length":459},"snippet":"def homSelectorObj (B H : C) [CategoryTheory.Exponentiable B] : C·µí·µñ ‚•§ Type v where\n  obj X := (Opposite.unop X ‚ü∂ SelectorObj (C := C) B H)\n  map {X Y} f g := f.unop ‚â´ g\n  map_id X := by\n    ext g\n    simp","pos":{"x":0.2746168561645406,"y":0.1582441665939818},"pos3":{"x":0.6269967614347681,"y":0.1405280870456779,"z":0.1870090274587031}},{"id":"HeytingLean.ClosingTheLoop.Cat.curryNatIso","name":"HeytingLean.ClosingTheLoop.Cat.curryNatIso","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Cat/YonedaViewNat.lean","line":59,"family":"Cat","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":5,"parenDepth":2,"length":779},"snippet":"def curryNatIso (B H : C) [CategoryTheory.Exponentiable B] :\n    homTensorLeft (C := C) B H ‚âÖ homSelectorObj (C := C) B H := by\n  refine NatIso.ofComponents (fun X => ?_) ?_\n  ¬∑ refine (Equiv.toIso\n      { toFun := CategoryTheory.CartesianClosed.curry (A := B) (Y := Opposite.unop X) (X := H)\n        invFun := CategoryTheory.CartesianClosed.uncurry (A := B) (Y := Opposite.unop X) (X := H)","pos":{"x":0.361338897749794,"y":0.19823044181701338},"pos3":{"x":0.5796956452689024,"y":0.2514491769596641,"z":0.27238729721446825}},{"id":"HeytingLean.ClosingTheLoop.FA.Node","name":"HeytingLean.ClosingTheLoop.FA.Node","kind":"structure","path":"lean/HeytingLean/ClosingTheLoop/FA/Diagram.lean","line":19,"family":"FA","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":0,"length":90},"snippet":"structure Node where\n  name : String\n  ty : Type u\n\n/-- A typed edge between two nodes. -/","pos":{"x":0.9769614035182439,"y":0.9701987172384922},"pos3":{"x":0.030902282402449032,"y":0.9225661414408194,"z":0.9873989331024657}},{"id":"HeytingLean.ClosingTheLoop.FA.Edge","name":"HeytingLean.ClosingTheLoop.FA.Edge","kind":"structure","path":"lean/HeytingLean/ClosingTheLoop/FA/Diagram.lean","line":24,"family":"FA","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":126},"snippet":"structure Edge where\n  src : Node.{u}\n  dst : Node.{u}\n  map : src.ty ‚Üí dst.ty\n\n/-- A finite typed diagram (nodes + edges). -/","pos":{"x":0.6738952043690015,"y":0.7413166547915705},"pos3":{"x":0.6005914536726021,"y":0.896650187741672,"z":0.7302837521376461}},{"id":"HeytingLean.ClosingTheLoop.FA.Diagram","name":"HeytingLean.ClosingTheLoop.FA.Diagram","kind":"structure","path":"lean/HeytingLean/ClosingTheLoop/FA/Diagram.lean","line":30,"family":"FA","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":0,"length":108},"snippet":"structure Diagram where\n  nodes : List Node\n  edges : List Edge\n\nend FA\nend ClosingTheLoop","pos":{"x":0.9782090316960442,"y":0.9847066027727203},"pos3":{"x":0.016410629462190365,"y":0.9285265520578312,"z":1}},{"id":"HeytingLean.ClosingTheLoop.FA.TemporalNode","name":"HeytingLean.ClosingTheLoop.FA.TemporalNode","kind":"structure","path":"lean/HeytingLean/ClosingTheLoop/FA/Temporal.lean","line":34,"family":"FA","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":170},"snippet":"structure TemporalNode (T : Type u) [Category.{v} T] where\n  name : String\n  ty : T ‚•§ Type w\n\n/-- A time-indexed edge: a natural transformation between temporal nodes. -/","pos":{"x":0.9059194903228047,"y":0.5772473214286756},"pos3":{"x":0.4097746165990298,"y":1,"z":0.7566959043638986}},{"id":"HeytingLean.ClosingTheLoop.FA.TemporalEdge","name":"HeytingLean.ClosingTheLoop.FA.TemporalEdge","kind":"structure","path":"lean/HeytingLean/ClosingTheLoop/FA/Temporal.lean","line":39,"family":"FA","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":202},"snippet":"structure TemporalEdge (T : Type u) [Category.{v} T] where\n  src : TemporalNode T\n  dst : TemporalNode T\n  map : src.ty ‚ü∂ dst.ty\n\n/-- A (finite) time-indexed diagram: temporal nodes + temporal edges. -/","pos":{"x":0.8930037771643643,"y":0.5329672411727036},"pos3":{"x":0.41533911076945335,"y":0.9652195798351417,"z":0.7428130410830227}},{"id":"HeytingLean.ClosingTheLoop.FA.TemporalDiagram","name":"HeytingLean.ClosingTheLoop.FA.TemporalDiagram","kind":"structure","path":"lean/HeytingLean/ClosingTheLoop/FA/Temporal.lean","line":45,"family":"FA","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":169},"snippet":"structure TemporalDiagram (T : Type u) [Category.{v} T] where\n  nodes : List (TemporalNode T)\n  edges : List (TemporalEdge T)\n\nend FA\nend ClosingTheLoop","pos":{"x":0.8955583320990618,"y":0.6077455709251456},"pos3":{"x":0.41806651096324743,"y":0.979876889021646,"z":0.7587701187866384}},{"id":"HeytingLean.ClosingTheLoop.MR.MRSystem","name":"HeytingLean.ClosingTheLoop.MR.MRSystem","kind":"structure","path":"lean/HeytingLean/ClosingTheLoop/MR/Basic.lean","line":26,"family":"MR","features":{"implies":8,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":461},"snippet":"structure MRSystem where\n  A : Type u\n  B : Type v\n  /-- Admissible maps `H(A,B) ‚äÜ (A ‚Üí B)`. -/\n  H : Set (A ‚Üí B)\n  /-- A distinguished metabolism map. -/","pos":{"x":0.6011882230251799,"y":0.7405665032203465},"pos3":{"x":0.641472809004089,"y":0.7403409641560672,"z":0.6374874920482744}},{"id":"HeytingLean.ClosingTheLoop.MR.AdmissibleMap","name":"HeytingLean.ClosingTheLoop.MR.AdmissibleMap","kind":"abbrev","path":"lean/HeytingLean/ClosingTheLoop/MR/Basic.lean","line":41,"family":"MR","features":{"implies":2,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":190},"snippet":"abbrev AdmissibleMap (S : MRSystem.{u, v}) : Type (max u v) :=\n  {g : S.A ‚Üí S.B // g ‚àà S.H}\n\n/-- Replacement/repair selectors: admissible maps `B ‚Üí H(A,B)` with their admissibility proof. -/","pos":{"x":0.6423378138089932,"y":0.6728846883842409},"pos3":{"x":0.5928404606181966,"y":0.775412004455453,"z":0.6781964230272797}},{"id":"HeytingLean.ClosingTheLoop.MR.Selector","name":"HeytingLean.ClosingTheLoop.MR.Selector","kind":"abbrev","path":"lean/HeytingLean/ClosingTheLoop/MR/Basic.lean","line":45,"family":"MR","features":{"implies":2,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":0,"parenDepth":1,"length":262},"snippet":"abbrev Selector (S : MRSystem.{u, v}) : Type (max u v) :=\n  {Œ¶ : S.B ‚Üí AdmissibleMap S // Œ¶ ‚àà S.Sel}\n\ninstance (S : MRSystem.{u, v}) : CoeFun (Selector S) (fun _ => S.B ‚Üí AdmissibleMap S) where\n  coe Œ¶ := Œ¶.1\n","pos":{"x":0.6316951575166314,"y":0.6314873453826746},"pos3":{"x":0.5833067492950093,"y":0.730916531948999,"z":0.6548506028624251}},{"id":"HeytingLean.ClosingTheLoop.MR.evalAt","name":"HeytingLean.ClosingTheLoop.MR.evalAt","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/MR/Basic.lean","line":52,"family":"MR","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":2,"tactics":1,"parenDepth":1,"length":300},"snippet":"def evalAt (S : MRSystem.{u, v}) (b : S.B) : Selector S ‚Üí AdmissibleMap S :=\n  fun Œ¶ => Œ¶ b\n\n@[simp] lemma evalAt_apply (S : MRSystem.{u, v}) (b : S.B) (Œ¶ : Selector S) :\n    evalAt S b Œ¶ = Œ¶ b := rfl\n","pos":{"x":0.7267246008082494,"y":0.5403104638577637},"pos3":{"x":0.463645986775979,"y":0.7644896716294202,"z":0.6658905720038755}},{"id":"HeytingLean.ClosingTheLoop.MR.EvalAtInjective","name":"HeytingLean.ClosingTheLoop.MR.EvalAtInjective","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/MR/Basic.lean","line":59,"family":"MR","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":139},"snippet":"def EvalAtInjective (S : MRSystem.{u, v}) (b : S.B) : Prop :=\n  Function.Injective (evalAt S b)\n\nend MR\nend ClosingTheLoop\nend HeytingLean","pos":{"x":0.8995775376204285,"y":0.6341547364254921},"pos3":{"x":0.4289919248595588,"y":0.9719047863460748,"z":0.7967163271459776}},{"id":"HeytingLean.ClosingTheLoop.MR.closeSelector","name":"HeytingLean.ClosingTheLoop.MR.closeSelector","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/MR/ClosureOperator.lean","line":28,"family":"MR","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":3,"tactics":2,"parenDepth":2,"length":548},"snippet":"def closeSelector (S : MRSystem.{u, v}) (b : S.B) (RI : RightInverseAt S b) :\n    Selector S ‚Üí Selector S :=\n  fun Œ¶ => RI.Œ≤ (Œ¶ b)\n\nnamespace closeSelector\n","pos":{"x":0.34701979503134156,"y":0.3307131730285002},"pos3":{"x":0.606063333772318,"y":0.42371674147985283,"z":0.3276004099797051}},{"id":"HeytingLean.ClosingTheLoop.MR.closeSelector.idem","name":"HeytingLean.ClosingTheLoop.MR.closeSelector.idem","kind":"theorem","path":"lean/HeytingLean/ClosingTheLoop/MR/ClosureOperator.lean","line":45,"family":"MR","features":{"implies":0,"not":0,"and":1,"or":0,"forall":0,"exists":0,"eq":1,"tactics":0,"parenDepth":2,"length":615},"snippet":"theorem idem (Œ¶ : Selector S) :\n    closeSelector S b RI (closeSelector S b RI Œ¶) = closeSelector S b RI Œ¶ := by\n  -- The operator depends only on the `b`-value, which is fixed by `closeSelector`.\n  dsimp [closeSelector]\n  congr\n  simpa [evalAt] using (RI.right_inv (Œ¶ b))","pos":{"x":0.5234087757504947,"y":0.04582922762339883},"pos3":{"x":0.41022913038730346,"y":0.6005381156012789,"z":0.2961506880511835}},{"id":"HeytingLean.ClosingTheLoop.MR.closeSelector.of_evalAt_surjective","name":"HeytingLean.ClosingTheLoop.MR.closeSelector.of_evalAt_surjective","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/MR/ClosureOperator.lean","line":64,"family":"MR","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":232},"snippet":"noncomputable def of_evalAt_surjective (S : MRSystem.{u, v}) (b : S.B)\n    (hsurj : Function.Surjective (evalAt S b)) : Selector S ‚Üí Selector S :=\n  closeSelector S b (InverseEvaluation.of_evalAt_surjective (S := S) (b := b) hsurj)\n","pos":{"x":0.11331233929714804,"y":0.049211632602731314},"pos3":{"x":0.7955608508896216,"y":0.059517670442480804,"z":0}},{"id":"HeytingLean.ClosingTheLoop.MR.closeSelector.of_evalAt_surjective_idem","name":"HeytingLean.ClosingTheLoop.MR.closeSelector.of_evalAt_surjective_idem","kind":"theorem","path":"lean/HeytingLean/ClosingTheLoop/MR/ClosureOperator.lean","line":68,"family":"MR","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":0,"parenDepth":2,"length":638},"snippet":"theorem of_evalAt_surjective_idem (hsurj : Function.Surjective (evalAt S b)) (Œ¶ : Selector S) :\n    of_evalAt_surjective S b hsurj (of_evalAt_surjective S b hsurj Œ¶) =\n      of_evalAt_surjective S b hsurj Œ¶ := by\n  -- Reduce to idempotence of `closeSelector` under the derived section.\n  let RI : RightInverseAt S b :=\n    InverseEvaluation.of_evalAt_surjective (S := S) (b := b) hsurj","pos":{"x":0.3157644381236201,"y":0.16317717974868864},"pos3":{"x":0.6085639642599027,"y":0.23091064695889293,"z":0.2038406282079117}},{"id":"HeytingLean.ClosingTheLoop.MR.closeSelector.of_evalAt_surjective_eq_id","name":"HeytingLean.ClosingTheLoop.MR.closeSelector.of_evalAt_surjective_eq_id","kind":"theorem","path":"lean/HeytingLean/ClosingTheLoop/MR/ClosureOperator.lean","line":78,"family":"MR","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":1,"parenDepth":2,"length":641},"snippet":"theorem of_evalAt_surjective_eq_id (Hinj : InjectiveEvalAt S b)\n    (hsurj : Function.Surjective (evalAt S b)) (Œ¶ : Selector S) :\n    of_evalAt_surjective S b hsurj Œ¶ = Œ¶ := by\n  let RI : RightInverseAt S b :=\n    InverseEvaluation.of_evalAt_surjective (S := S) (b := b) hsurj\n  have hLeft : Function.LeftInverse RI.Œ≤ (evalAt S b) :=","pos":{"x":0.30974644168674337,"y":0.14899266097902897},"pos3":{"x":0.6057869253773923,"y":0.2344645519815028,"z":0.21648343629914651}},{"id":"HeytingLean.ClosingTheLoop.MR.IsClosed","name":"HeytingLean.ClosingTheLoop.MR.IsClosed","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/MR/ClosureOperator.lean","line":91,"family":"MR","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":0,"parenDepth":1,"length":183},"snippet":"def IsClosed (S : MRSystem.{u, v}) (b : S.B) (RI : RightInverseAt S b) (Œ¶ : Selector S) : Prop :=\n  closeSelector S b RI Œ¶ = Œ¶\n\nnamespace IsClosed\n\nvariable (RI : RightInverseAt S b)","pos":{"x":0.8142880478101316,"y":0.5612230306760707},"pos3":{"x":0.4060257387392627,"y":0.8484585471019983,"z":0.7351972251076877}},{"id":"HeytingLean.ClosingTheLoop.MR.IsClosed.iff_eq","name":"HeytingLean.ClosingTheLoop.MR.IsClosed.iff_eq","kind":"lemma","path":"lean/HeytingLean/ClosingTheLoop/MR/ClosureOperator.lean","line":98,"family":"MR","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":2,"tactics":1,"parenDepth":1,"length":164},"snippet":"lemma iff_eq (Œ¶ : Selector S) :\n    IsClosed S b RI Œ¶ ‚Üî Œ¶ = RI.Œ≤ (Œ¶ b) := by\n  -- `IsClosed` unfolds to `RI.Œ≤ (Œ¶ b) = Œ¶`.\n  simp [IsClosed, closeSelector, eq_comm]\n","pos":{"x":0.7752453323033095,"y":0.5964374517212924},"pos3":{"x":0.4010673223149524,"y":0.7613871856271636,"z":0.7506439190604481}},{"id":"HeytingLean.ClosingTheLoop.MR.IsClosed.exists_eq_beta_iff","name":"HeytingLean.ClosingTheLoop.MR.IsClosed.exists_eq_beta_iff","kind":"lemma","path":"lean/HeytingLean/ClosingTheLoop/MR/ClosureOperator.lean","line":103,"family":"MR","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":1,"eq":5,"tactics":3,"parenDepth":2,"length":557},"snippet":"lemma exists_eq_beta_iff (Œ¶ : Selector S) :\n    IsClosed S b RI Œ¶ ‚Üî ‚àÉ g : AdmissibleMap S, RI.Œ≤ g = Œ¶ := by\n  constructor\n  ¬∑ intro h\n    refine ‚ü®Œ¶ b, ?_‚ü©\n    -- Closed means `Œ≤ (Œ¶ b) = Œ¶`.","pos":{"x":0.5107930316676552,"y":0.4317951532873949},"pos3":{"x":0.5710929893064274,"y":0.5239876628497986,"z":0.44346716519491003}},{"id":"HeytingLean.ClosingTheLoop.MR.IsClosed.close_isClosed","name":"HeytingLean.ClosingTheLoop.MR.IsClosed.close_isClosed","kind":"lemma","path":"lean/HeytingLean/ClosingTheLoop/MR/ClosureOperator.lean","line":118,"family":"MR","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":265},"snippet":"lemma close_isClosed (Œ¶ : Selector S) :\n    IsClosed S b RI (closeSelector S b RI Œ¶) := by\n  -- `IsClosed` is exactly idempotence.\n  simpa [IsClosed] using (closeSelector.idem (S := S) (b := b) (RI := RI) Œ¶)\n\nend IsClosed","pos":{"x":0.1568220468370197,"y":0.0866690409316296},"pos3":{"x":0.7393254149441894,"y":0.05606894222858089,"z":0.06970751123452623}},{"id":"HeytingLean.ClosingTheLoop.MR.InjectiveEvalAt","name":"HeytingLean.ClosingTheLoop.MR.InjectiveEvalAt","kind":"structure","path":"lean/HeytingLean/ClosingTheLoop/MR/InverseEvaluation.lean","line":25,"family":"MR","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":1,"parenDepth":1,"length":315},"snippet":"structure InjectiveEvalAt (S : MRSystem.{u, v}) (b : S.B) : Prop where\n  inj : Function.Injective (evalAt S b)\n\nnamespace InjectiveEvalAt\n\nvariable {b}","pos":{"x":0.8576339349350416,"y":0.43144039686366076},"pos3":{"x":0.35980803952250484,"y":0.8886383816577383,"z":0.6446568959981852}},{"id":"HeytingLean.ClosingTheLoop.MR.InjectiveEvalAt.eq_of_eval_eq","name":"HeytingLean.ClosingTheLoop.MR.InjectiveEvalAt.eq_of_eval_eq","kind":"theorem","path":"lean/HeytingLean/ClosingTheLoop/MR/InverseEvaluation.lean","line":36,"family":"MR","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":2,"tactics":2,"parenDepth":1,"length":270},"snippet":"theorem eq_of_eval_eq (Hinj : InjectiveEvalAt S b) {Œ¶ Œ® : Selector S} :\n    Œ¶ b = Œ® b ‚Üí Œ¶ = Œ® := by\n  intro h\n  rcases Hinj with ‚ü®hInj‚ü©\n  apply hInj\n  simpa using h","pos":{"x":0.7387277161526894,"y":0.5176609414754966},"pos3":{"x":0.44169665255247037,"y":0.7455231533371142,"z":0.6686474070384834}},{"id":"HeytingLean.ClosingTheLoop.MR.InverseEvaluation","name":"HeytingLean.ClosingTheLoop.MR.InverseEvaluation","kind":"structure","path":"lean/HeytingLean/ClosingTheLoop/MR/InverseEvaluation.lean","line":46,"family":"MR","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":152},"snippet":"structure InverseEvaluation (S : MRSystem.{u, v}) (b : S.B) where\n  Œ≤ : AdmissibleMap S ‚Üí Selector S\n  right_inv : Function.RightInverse Œ≤ (evalAt S b)\n","pos":{"x":0.691099521857094,"y":0.6810156366709208},"pos3":{"x":0.5808229627318207,"y":0.8453745211567599,"z":0.6986294822297294}},{"id":"HeytingLean.ClosingTheLoop.MR.RightInverseAt","name":"HeytingLean.ClosingTheLoop.MR.RightInverseAt","kind":"abbrev","path":"lean/HeytingLean/ClosingTheLoop/MR/InverseEvaluation.lean","line":50,"family":"MR","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":1,"parenDepth":1,"length":401},"snippet":"abbrev RightInverseAt (S : MRSystem.{u, v}) (b : S.B) : Type (max u v) :=\n  InverseEvaluation S b\n\nnamespace InverseEvaluation\n\nvariable {b}","pos":{"x":0.8163471972269213,"y":0.41662915278616897},"pos3":{"x":0.38553985852509454,"y":0.8118158873365178,"z":0.6195435865582455}},{"id":"HeytingLean.ClosingTheLoop.MR.InverseEvaluation.beta_injective","name":"HeytingLean.ClosingTheLoop.MR.InverseEvaluation.beta_injective","kind":"theorem","path":"lean/HeytingLean/ClosingTheLoop/MR/InverseEvaluation.lean","line":65,"family":"MR","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":4,"tactics":2,"parenDepth":2,"length":463},"snippet":"theorem beta_injective (RI : InverseEvaluation S b) : Function.Injective RI.Œ≤ := by\n  intro x y hxy\n  have hEval : evalAt S b (RI.Œ≤ x) = evalAt S b (RI.Œ≤ y) :=\n    congrArg (evalAt S b) hxy\n  -- Rewrite both sides via the right-inverse law.\n  calc","pos":{"x":0.3528979917604583,"y":0.33403997512661676},"pos3":{"x":0.6238464109459431,"y":0.3881304936470676,"z":0.3519231466747222}},{"id":"HeytingLean.ClosingTheLoop.MR.InverseEvaluation.evalAt_surjective","name":"HeytingLean.ClosingTheLoop.MR.InverseEvaluation.evalAt_surjective","kind":"theorem","path":"lean/HeytingLean/ClosingTheLoop/MR/InverseEvaluation.lean","line":76,"family":"MR","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":2,"length":482},"snippet":"theorem evalAt_surjective (RI : InverseEvaluation S b) : Function.Surjective (evalAt S b) := by\n  intro g\n  exact ‚ü®RI.Œ≤ g, evalAt_beta (S := S) (b := b) RI g‚ü©\n\nend InverseEvaluation\n","pos":{"x":0.2837739289626063,"y":0.14782728005899065},"pos3":{"x":0.6225143007244901,"y":0.16626089759526283,"z":0.1967762232498679}},{"id":"HeytingLean.ClosingTheLoop.MR.InverseEvaluation.of_evalAt_surjective","name":"HeytingLean.ClosingTheLoop.MR.InverseEvaluation.of_evalAt_surjective","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/MR/InverseEvaluation.lean","line":90,"family":"MR","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":2,"parenDepth":2,"length":334},"snippet":"noncomputable def of_evalAt_surjective (hsurj : Function.Surjective (evalAt S b)) :\n    InverseEvaluation S b := by\n  classical\n  refine ‚ü®fun g => Classical.choose (hsurj g), ?_‚ü©\n  intro g\n  exact (Classical.choose_spec (hsurj g))","pos":{"x":0.2645778672574641,"y":0.26551044569332},"pos3":{"x":0.6867439415928829,"y":0.1943932920970758,"z":0.2414311578012459}},{"id":"HeytingLean.ClosingTheLoop.MR.InverseEvaluation.beta_leftInverse_of_injective","name":"HeytingLean.ClosingTheLoop.MR.InverseEvaluation.beta_leftInverse_of_injective","kind":"theorem","path":"lean/HeytingLean/ClosingTheLoop/MR/InverseEvaluation.lean","line":98,"family":"MR","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":3,"parenDepth":2,"length":444},"snippet":"theorem beta_leftInverse_of_injective (Hinj : InjectiveEvalAt S b) (RI : InverseEvaluation S b) :\n    Function.LeftInverse RI.Œ≤ (evalAt S b) := by\n  intro Œ¶\n  apply Hinj.inj\n  simpa using (RI.right_inv (evalAt S b Œ¶))\n","pos":{"x":0.29712151243638446,"y":0.2310425902618415},"pos3":{"x":0.6359244065222893,"y":0.18603491920805307,"z":0.25432825155697764}},{"id":"HeytingLean.ClosingTheLoop.MR.RightInverseAt.beta_injective","name":"HeytingLean.ClosingTheLoop.MR.RightInverseAt.beta_injective","kind":"theorem","path":"lean/HeytingLean/ClosingTheLoop/MR/InverseEvaluation.lean","line":114,"family":"MR","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":134},"snippet":"theorem beta_injective (RI : RightInverseAt S b) : Function.Injective RI.Œ≤ :=\n  InverseEvaluation.beta_injective (S := S) (b := b) RI\n","pos":{"x":0.879154623450834,"y":0.635175569237289},"pos3":{"x":0.45389940670079515,"y":0.9823290388792991,"z":0.7869327723300237}},{"id":"HeytingLean.ClosingTheLoop.MR.RightInverseAt.evalAt_surjective","name":"HeytingLean.ClosingTheLoop.MR.RightInverseAt.evalAt_surjective","kind":"theorem","path":"lean/HeytingLean/ClosingTheLoop/MR/InverseEvaluation.lean","line":117,"family":"MR","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":247},"snippet":"theorem evalAt_surjective (RI : RightInverseAt S b) : Function.Surjective (evalAt S b) :=\n  InverseEvaluation.evalAt_surjective (S := S) (b := b) RI\n\nend RightInverseAt\n\n/-- A witness-carrying version of the image of `evalAt S b` (choice-free). -/","pos":{"x":0.8759234870102232,"y":0.5000505770260109},"pos3":{"x":0.3941592500034851,"y":0.9647775532207039,"z":0.7001564477943305}},{"id":"HeytingLean.ClosingTheLoop.MR.EvalImage","name":"HeytingLean.ClosingTheLoop.MR.EvalImage","kind":"structure","path":"lean/HeytingLean/ClosingTheLoop/MR/InverseEvaluation.lean","line":123,"family":"MR","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":0,"parenDepth":1,"length":350},"snippet":"structure EvalImage (S : MRSystem.{u, v}) (b : S.B) : Type (max u v) where\n  g : AdmissibleMap S\n  Œ¶ : Selector S\n  eval_eq : evalAt S b Œ¶ = g\n\nnamespace EvalImage","pos":{"x":0.8335095990438907,"y":0.4546222909060939},"pos3":{"x":0.3967277783411772,"y":0.8486435998033358,"z":0.6384649787000864}},{"id":"HeytingLean.ClosingTheLoop.MR.EvalImage.betaOnImage","name":"HeytingLean.ClosingTheLoop.MR.EvalImage.betaOnImage","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/MR/InverseEvaluation.lean","line":137,"family":"MR","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":1,"parenDepth":2,"length":253},"snippet":"def betaOnImage (x : EvalImage S b) : Selector S :=\n  x.Œ¶\n\n@[simp] lemma evalAt_betaOnImage (x : EvalImage S b) :\n    evalAt S b (betaOnImage (S := S) (b := b) x) = x.g :=\n  x.eval_eq","pos":{"x":0.21482071969825078,"y":0.2573434298150452},"pos3":{"x":0.7559675389772142,"y":0.15334449293928762,"z":0.2190329135328264}},{"id":"HeytingLean.ClosingTheLoop.MR.EvalImage.ofSelector","name":"HeytingLean.ClosingTheLoop.MR.EvalImage.ofSelector","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/MR/InverseEvaluation.lean","line":145,"family":"MR","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":1,"parenDepth":2,"length":279},"snippet":"def ofSelector (Œ¶ : Selector S) : EvalImage S b :=\n  ‚ü®Œ¶ b, Œ¶, rfl‚ü©\n\n@[simp] lemma betaOnImage_ofSelector (Œ¶ : Selector S) :\n    betaOnImage (S := S) (b := b) (ofSelector (S := S) (b := b) Œ¶) = Œ¶ :=\n  rfl","pos":{"x":0.22396353285062395,"y":0.2627799014851414},"pos3":{"x":0.7417573319221107,"y":0.166839817994995,"z":0.21401414245880931}},{"id":"HeytingLean.ClosingTheLoop.MR.EvalImage.toRange","name":"HeytingLean.ClosingTheLoop.MR.EvalImage.toRange","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/MR/InverseEvaluation.lean","line":153,"family":"MR","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":144},"snippet":"def toRange (x : EvalImage S b) : Set.range (evalAt S b) :=\n  ‚ü®x.g, ‚ü®x.Œ¶, x.eval_eq‚ü©‚ü©\n\nend EvalImage\n\nend MR","pos":{"x":0.017741916431324636,"y":0.3557754002817543},"pos3":{"x":0.9988162543580471,"y":0.041359327650861734,"z":0.15669738084121448}},{"id":"HeytingLean.ClosingTheLoop.MR.paper_uniqueness","name":"HeytingLean.ClosingTheLoop.MR.paper_uniqueness","kind":"theorem","path":"lean/HeytingLean/ClosingTheLoop/MR/PaperMapping.lean","line":26,"family":"MR","features":{"implies":1,"not":1,"and":1,"or":0,"forall":0,"exists":0,"eq":2,"tactics":0,"parenDepth":1,"length":363},"snippet":"theorem paper_uniqueness (Hinj : InjectiveEvalAt S b) {Œ¶ Œ® : Selector S} :\n    Œ¶ b = Œ® b ‚Üí Œ¶ = Œ® :=\n  Hinj.eq_of_eval_eq (S := S) (b := b)\n\n/-- A chosen right inverse of evaluation makes `evalAt` surjective, hence provides\nexistence of selectors realizing any admissible map at `b`.","pos":{"x":0.5618069096974772,"y":0.2013840457934021},"pos3":{"x":0.4441244928042362,"y":0.6160730805298823,"z":0.42226059238792263}},{"id":"HeytingLean.ClosingTheLoop.MR.rightInverse_implies_surjective","name":"HeytingLean.ClosingTheLoop.MR.rightInverse_implies_surjective","kind":"theorem","path":"lean/HeytingLean/ClosingTheLoop/MR/PaperMapping.lean","line":34,"family":"MR","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":192},"snippet":"theorem rightInverse_implies_surjective (RI : RightInverseAt S b) :\n    Function.Surjective (evalAt S b) :=\n  RI.evalAt_surjective (S := S) (b := b)\n\nend MR\nend ClosingTheLoop","pos":{"x":0.8908230765343994,"y":0.5828145921798049},"pos3":{"x":0.4186416953899528,"y":0.9904528130298683,"z":0.7229994297017026}},{"id":"HeytingLean.ClosingTheLoop.SetLevel.selector_eq_of_eval_eq","name":"HeytingLean.ClosingTheLoop.SetLevel.selector_eq_of_eval_eq","kind":"theorem","path":"lean/HeytingLean/ClosingTheLoop/Main.lean","line":33,"family":"SetLevel","features":{"implies":1,"not":1,"and":0,"or":0,"forall":0,"exists":0,"eq":2,"tactics":0,"parenDepth":1,"length":371},"snippet":"theorem selector_eq_of_eval_eq (Hinj : InjectiveEvalAt S b) {Œ¶ Œ® : Selector S} :\n    Œ¶ b = Œ® b ‚Üí Œ¶ = Œ® :=\n  InjectiveEvalAt.eq_of_eval_eq (S := S) (b := b) Hinj\n\n/-- Constructive closure: a chosen section `Œ≤` induces an idempotent loop-closing operator.\n","pos":{"x":0.5862741482658284,"y":0.31304272687979273},"pos3":{"x":0.4547948591734946,"y":0.6319334909306824,"z":0.49795004592936704}},{"id":"HeytingLean.ClosingTheLoop.SetLevel.closeSelector_idem","name":"HeytingLean.ClosingTheLoop.SetLevel.closeSelector_idem","kind":"theorem","path":"lean/HeytingLean/ClosingTheLoop/Main.lean","line":41,"family":"SetLevel","features":{"implies":0,"not":0,"and":1,"or":0,"forall":0,"exists":0,"eq":1,"tactics":0,"parenDepth":1,"length":689},"snippet":"theorem closeSelector_idem (RI : RightInverseAt S b) (Œ¶ : Selector S) :\n    closeSelector S b RI (closeSelector S b RI Œ¶) = closeSelector S b RI Œ¶ :=\n  closeSelector.idem (S := S) (b := b) (RI := RI) Œ¶\n\nend SetLevel\n","pos":{"x":0.5374349029178321,"y":0.056695860400725176},"pos3":{"x":0.40982943727511867,"y":0.6288471169197903,"z":0.32088460356249593}},{"id":"HeytingLean.ClosingTheLoop.CatLevel.close_idem","name":"HeytingLean.ClosingTheLoop.CatLevel.close_idem","kind":"theorem","path":"lean/HeytingLean/ClosingTheLoop/Main.lean","line":62,"family":"CatLevel","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":0,"parenDepth":2,"length":325},"snippet":"theorem close_idem (ri : Cat.RightInverseAt (C := C) (B := B) (H := H) b) :\n    Cat.close (C := C) (B := B) (H := H) b ri ‚â´ Cat.close (C := C) (B := B) (H := H) b ri =\n      Cat.close (C := C) (B := B) (H := H) b ri :=\n  Cat.close.idem (C := C) (B := B) (H := H) (b := b) ri\n\nend CatLevel","pos":{"x":0.21181584870879416,"y":0.2273687164011543},"pos3":{"x":0.7330400889369655,"y":0.16968691770157465,"z":0.17483974660752136}},{"id":"HeytingLean.ClosingTheLoop.Semantics.FunctorialTime.futureKernel","name":"HeytingLean.ClosingTheLoop.Semantics.FunctorialTime.futureKernel","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Semantics/FunctorialTime.lean","line":41,"family":"Semantics","features":{"implies":0,"not":0,"and":0,"or":0,"forall":4,"exists":0,"eq":1,"tactics":0,"parenDepth":2,"length":176},"snippet":"def futureKernel (S : ‚àÄ t : T, Set (X.obj t)) : ‚àÄ t : T, Set (X.obj t) :=\n  fun t =>\n    {x | ‚àÄ ‚¶Ét' : T‚¶Ñ, ‚àÄ f : t ‚ü∂ t', X.map f x ‚àà S t'}\n\nnamespace futureKernel\n","pos":{"x":0.18682275579943516,"y":0.4931410720683559},"pos3":{"x":0.8695239750187208,"y":0.2556758172282867,"z":0.21127431231368612}},{"id":"HeytingLean.ClosingTheLoop.Semantics.FunctorialTime.futureKernel.monotone","name":"HeytingLean.ClosingTheLoop.Semantics.FunctorialTime.futureKernel.monotone","kind":"lemma","path":"lean/HeytingLean/ClosingTheLoop/Semantics/FunctorialTime.lean","line":49,"family":"Semantics","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":1,"length":98},"snippet":"lemma monotone : Monotone (futureKernel X) := by\n  intro S‚ÇÅ S‚ÇÇ hS t x hx t' f\n  exact hS _ (hx f)\n","pos":{"x":0.8511975744418899,"y":0.7138756966447746},"pos3":{"x":0.3905670158562101,"y":0.872229021079883,"z":0.8464496724612787}},{"id":"HeytingLean.ClosingTheLoop.Semantics.FunctorialTime.futureKernel.contractive","name":"HeytingLean.ClosingTheLoop.Semantics.FunctorialTime.futureKernel.contractive","kind":"lemma","path":"lean/HeytingLean/ClosingTheLoop/Semantics/FunctorialTime.lean","line":53,"family":"Semantics","features":{"implies":0,"not":0,"and":0,"or":0,"forall":1,"exists":0,"eq":0,"tactics":1,"parenDepth":2,"length":129},"snippet":"lemma contractive (S : ‚àÄ t : T, Set (X.obj t)) (t : T) :\n    futureKernel X S t ‚äÜ S t := by\n  intro x hx\n  simpa using hx (ùüô t)\n","pos":{"x":0.08694391472371245,"y":0.4027001331081926},"pos3":{"x":0.9307958557290004,"y":0.1635065754845757,"z":0.1446733836748443}},{"id":"HeytingLean.ClosingTheLoop.Semantics.FunctorialTime.futureKernel.idem","name":"HeytingLean.ClosingTheLoop.Semantics.FunctorialTime.futureKernel.idem","kind":"lemma","path":"lean/HeytingLean/ClosingTheLoop/Semantics/FunctorialTime.lean","line":58,"family":"Semantics","features":{"implies":0,"not":0,"and":0,"or":0,"forall":1,"exists":0,"eq":2,"tactics":4,"parenDepth":2,"length":380},"snippet":"lemma idem (S : ‚àÄ t : T, Set (X.obj t)) :\n    futureKernel X (futureKernel X S) = futureKernel X S := by\n  funext t\n  ext x\n  constructor\n  ¬∑ intro hx t' f","pos":{"x":0.30001554817922665,"y":0.31023266791847925},"pos3":{"x":0.6597563234906934,"y":0.20802910489507948,"z":0.29413332195464426}},{"id":"HeytingLean.ClosingTheLoop.Semantics.FunctorialTime.futureKernel.meet","name":"HeytingLean.ClosingTheLoop.Semantics.FunctorialTime.futureKernel.meet","kind":"lemma","path":"lean/HeytingLean/ClosingTheLoop/Semantics/FunctorialTime.lean","line":70,"family":"Semantics","features":{"implies":0,"not":0,"and":0,"or":0,"forall":1,"exists":0,"eq":3,"tactics":9,"parenDepth":2,"length":467},"snippet":"lemma meet (S‚ÇÅ S‚ÇÇ : ‚àÄ t : T, Set (X.obj t)) :\n    futureKernel X (fun t => S‚ÇÅ t ‚à© S‚ÇÇ t) = fun t => futureKernel X S‚ÇÅ t ‚à© futureKernel X S‚ÇÇ t := by\n  funext t\n  ext x\n  constructor\n  ¬∑ intro hx","pos":{"x":0.4093650928698045,"y":0.2966649428049922},"pos3":{"x":0.5509419434689155,"y":0.2575613152675926,"z":0.36408760898661824}},{"id":"HeytingLean.ClosingTheLoop.Semantics.FunctorialTime.futureKernelKernel","name":"HeytingLean.ClosingTheLoop.Semantics.FunctorialTime.futureKernelKernel","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Semantics/FunctorialTime.lean","line":86,"family":"Semantics","features":{"implies":0,"not":0,"and":1,"or":0,"forall":1,"exists":0,"eq":1,"tactics":2,"parenDepth":2,"length":721},"snippet":"def futureKernelKernel : Kernel (Œ± := ‚àÄ t : T, Set (X.obj t)) where\n  toFun := futureKernel X\n  monotone' := futureKernel.monotone (X := X)\n  map_inf' S T := by\n    -- `inf` on predicates is pointwise intersection.\n    simpa [Pi.inf_apply, inf_eq_inter] using (futureKernel.meet (X := X) S T)","pos":{"x":0.5109431489784814,"y":0.03444188922635128},"pos3":{"x":0.4183198606353682,"y":0.5677149054629009,"z":0.3136978840841851}},{"id":"HeytingLean.ClosingTheLoop.Semantics.FunctorialTime.unreachableFrom","name":"HeytingLean.ClosingTheLoop.Semantics.FunctorialTime.unreachableFrom","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Semantics/FunctorialTime.lean","line":106,"family":"Semantics","features":{"implies":0,"not":2,"and":0,"or":0,"forall":1,"exists":1,"eq":2,"tactics":0,"parenDepth":1,"length":355},"snippet":"def unreachableFrom (t‚ÇÄ : T) : ‚àÄ t : T, Set (X.obj t) :=\n  fun t =>\n    {x | ¬¨ ‚àÉ (f : t‚ÇÄ ‚ü∂ t) (x0 : X.obj t‚ÇÄ), X.map f x0 = x}\n\n/-- A functorial-time `Nucleus` on predicates: close by unioning in unreachable states.\n","pos":{"x":0.5526532719139956,"y":0.3835679871386139},"pos3":{"x":0.5040834634550909,"y":0.5926257516854272,"z":0.4805281750490311}},{"id":"HeytingLean.ClosingTheLoop.Semantics.FunctorialTime.reachabilityNucleus","name":"HeytingLean.ClosingTheLoop.Semantics.FunctorialTime.reachabilityNucleus","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Semantics/FunctorialTime.lean","line":114,"family":"Semantics","features":{"implies":0,"not":0,"and":0,"or":0,"forall":2,"exists":0,"eq":6,"tactics":14,"parenDepth":2,"length":940},"snippet":"def reachabilityNucleus (t‚ÇÄ : T) : Nucleus (‚àÄ t : T, Set (X.obj t)) where\n  toFun S := fun t => S t ‚à™ unreachableFrom (X := X) t‚ÇÄ t\n  map_inf' S T := by\n    funext t\n    ext x\n    constructor","pos":{"x":0.4270616542183406,"y":0.30565630923456355},"pos3":{"x":0.5323924363883192,"y":0.2833004778566633,"z":0.348118450033254}},{"id":"HeytingLean.ClosingTheLoop.Semantics.Kernel","name":"HeytingLean.ClosingTheLoop.Semantics.Kernel","kind":"structure","path":"lean/HeytingLean/ClosingTheLoop/Semantics/KernelLaws.lean","line":32,"family":"Semantics","features":{"implies":2,"not":0,"and":0,"or":0,"forall":3,"exists":0,"eq":4,"tactics":1,"parenDepth":2,"length":380},"snippet":"structure Kernel where\n  toFun : Œ± ‚Üí Œ±\n  monotone' : Monotone toFun\n  map_inf' : ‚àÄ x y : Œ±, toFun (x ‚äì y) = toFun x ‚äì toFun y\n  idempotent' : ‚àÄ x : Œ±, toFun (toFun x) = toFun x\n  apply_le' : ‚àÄ x : Œ±, toFun x ‚â§ x","pos":{"x":0.179583614020825,"y":0.5161812778798718},"pos3":{"x":0.8693783140169008,"y":0.30185470639518364,"z":0.23647026895408924}},{"id":"HeytingLean.ClosingTheLoop.Semantics.Kernel.monotone","name":"HeytingLean.ClosingTheLoop.Semantics.Kernel.monotone","kind":"lemma","path":"lean/HeytingLean/ClosingTheLoop/Semantics/KernelLaws.lean","line":46,"family":"Semantics","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":2,"tactics":2,"parenDepth":2,"length":257},"snippet":"lemma monotone (k : Kernel (Œ± := Œ±)) : Monotone k := k.monotone'\n\n@[simp] lemma map_inf (k : Kernel (Œ± := Œ±)) (x y : Œ±) :\n    k (x ‚äì y) = k x ‚äì k y := k.map_inf' x y\n\n@[simp] lemma idempotent (k : Kernel (Œ± := Œ±)) (x : Œ±) : k (k x) = k x := k.idempotent' x","pos":{"x":0.258592511426218,"y":0.29481337710417516},"pos3":{"x":0.7265221241032437,"y":0.20350203579542525,"z":0.25242602850073825}},{"id":"HeytingLean.ClosingTheLoop.Semantics.Kernel.apply_le","name":"HeytingLean.ClosingTheLoop.Semantics.Kernel.apply_le","kind":"lemma","path":"lean/HeytingLean/ClosingTheLoop/Semantics/KernelLaws.lean","line":53,"family":"Semantics","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":124},"snippet":"lemma apply_le (k : Kernel (Œ± := Œ±)) (x : Œ±) : k x ‚â§ x := k.apply_le' x\n\n/-- Fixed-point predicate for a kernel operator. -/","pos":{"x":0,"y":0.328860504567231},"pos3":{"x":0.9823824091278486,"y":0.027065491340520834,"z":0.1728804320052827}},{"id":"HeytingLean.ClosingTheLoop.Semantics.Kernel.IsFixed","name":"HeytingLean.ClosingTheLoop.Semantics.Kernel.IsFixed","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Semantics/KernelLaws.lean","line":56,"family":"Semantics","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":0,"parenDepth":2,"length":60},"snippet":"def IsFixed (k : Kernel (Œ± := Œ±)) (x : Œ±) : Prop := k x = x\n","pos":{"x":0.07890550031501913,"y":0.308578401746359},"pos3":{"x":0.9064301265570729,"y":0.04985063794469676,"z":0.1669172185448538}},{"id":"HeytingLean.ClosingTheLoop.Semantics.Kernel.isFixed_iff","name":"HeytingLean.ClosingTheLoop.Semantics.Kernel.isFixed_iff","kind":"lemma","path":"lean/HeytingLean/ClosingTheLoop/Semantics/KernelLaws.lean","line":58,"family":"Semantics","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":0,"parenDepth":2,"length":134},"snippet":"lemma isFixed_iff (k : Kernel (Œ± := Œ±)) (x : Œ±) : k.IsFixed x ‚Üî k x = x := Iff.rfl\n\n/-- Every `k x` is a fixed point (idempotence). -/","pos":{"x":0.12640761610723586,"y":0.303946212296863},"pos3":{"x":0.87271018880991,"y":0.07364024154937245,"z":0.17761178558801957}},{"id":"HeytingLean.ClosingTheLoop.Semantics.Kernel.isFixed_apply","name":"HeytingLean.ClosingTheLoop.Semantics.Kernel.isFixed_apply","kind":"lemma","path":"lean/HeytingLean/ClosingTheLoop/Semantics/KernelLaws.lean","line":61,"family":"Semantics","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":1,"parenDepth":2,"length":166},"snippet":"lemma isFixed_apply (k : Kernel (Œ± := Œ±)) (x : Œ±) : k.IsFixed (k x) := by\n  simp [IsFixed]\n\nend Kernel\n\nend Kernel","pos":{"x":0.03714520642381571,"y":0.33205767256674207},"pos3":{"x":0.9586151712278823,"y":0,"z":0.11587055501676936}},{"id":"HeytingLean.ClosingTheLoop.Semantics.LambdaIRBridge.eval_beta","name":"HeytingLean.ClosingTheLoop.Semantics.LambdaIRBridge.eval_beta","kind":"theorem","path":"lean/HeytingLean/ClosingTheLoop/Semantics/LambdaIRBridge.lean","line":26,"family":"Semantics","features":{"implies":0,"not":0,"and":1,"or":0,"forall":0,"exists":0,"eq":1,"tactics":0,"parenDepth":2,"length":359},"snippet":"theorem eval_beta {Œì : LambdaIR.Ctx} {Œ± Œ≤ : LambdaIR.Ty}\n    (body : Term (Œ± :: Œì) Œ≤) (arg : Term Œì Œ±) (œÅ : LambdaIR.Env Œì) :\n    LambdaIR.eval (Term.app (Term.lam body) arg) œÅ =\n      LambdaIR.eval body (LambdaIR.extendEnv œÅ (LambdaIR.eval arg œÅ)) := by\n  rfl\n","pos":{"x":0.52333465591864,"y":0.08069488541859911},"pos3":{"x":0.4278593159624936,"y":0.6177995117228697,"z":0.3046688471269336}},{"id":"HeytingLean.ClosingTheLoop.Semantics.LambdaIRBridge.eval_lam_eq_curry","name":"HeytingLean.ClosingTheLoop.Semantics.LambdaIRBridge.eval_lam_eq_curry","kind":"theorem","path":"lean/HeytingLean/ClosingTheLoop/Semantics/LambdaIRBridge.lean","line":33,"family":"Semantics","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":3,"tactics":0,"parenDepth":2,"length":418},"snippet":"theorem eval_lam_eq_curry {Œì : LambdaIR.Ctx} {Œ± Œ≤ : LambdaIR.Ty} (body : Term (Œ± :: Œì) Œ≤) :\n    (fun œÅ : LambdaIR.Env Œì => LambdaIR.eval (Term.lam body) œÅ) =\n      Function.curry\n        (fun p : LambdaIR.Env Œì √ó LambdaIR.InterpTy Œ± =>\n          LambdaIR.eval body (LambdaIR.extendEnv p.1 p.2)) := by\n  funext œÅ","pos":{"x":0.32772005913613117,"y":0.34771195915845293},"pos3":{"x":0.6405936976052414,"y":0.3802584220227844,"z":0.306190969957885}},{"id":"HeytingLean.ClosingTheLoop.Semantics.LambdaIRBridge.eval_lam_eq_uncurry","name":"HeytingLean.ClosingTheLoop.Semantics.LambdaIRBridge.eval_lam_eq_uncurry","kind":"theorem","path":"lean/HeytingLean/ClosingTheLoop/Semantics/LambdaIRBridge.lean","line":43,"family":"Semantics","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":4,"tactics":1,"parenDepth":2,"length":409},"snippet":"theorem eval_lam_eq_uncurry {Œì : LambdaIR.Ctx} {Œ± Œ≤ : LambdaIR.Ty} (body : Term (Œ± :: Œì) Œ≤) :\n    Function.uncurry (fun œÅ : LambdaIR.Env Œì => LambdaIR.eval (Term.lam body) œÅ) =\n      (fun p : LambdaIR.Env Œì √ó LambdaIR.InterpTy Œ± =>\n        LambdaIR.eval body (LambdaIR.extendEnv p.1 p.2)) := by\n  funext p\n  cases p with","pos":{"x":0.3547637394693379,"y":0.35859370163860793},"pos3":{"x":0.6248666234754537,"y":0.39760660126933955,"z":0.3266961820093675}},{"id":"HeytingLean.ClosingTheLoop.Semantics.Mealy","name":"HeytingLean.ClosingTheLoop.Semantics.Mealy","kind":"structure","path":"lean/HeytingLean/ClosingTheLoop/Semantics/Mealy.lean","line":24,"family":"Semantics","features":{"implies":3,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":1,"length":453},"snippet":"structure Mealy (I : Type u) (O : Type v) (S : Type w) where\n  step : S ‚Üí I ‚Üí S √ó O\n\nnamespace Mealy\n\nvariable {I : Type u} {O : Type v} {S : Type w}","pos":{"x":0.6104011576543856,"y":0.685039477977133},"pos3":{"x":0.6153670147500001,"y":0.7548888565007426,"z":0.6247097673438312}},{"id":"HeytingLean.ClosingTheLoop.Semantics.MealyF","name":"HeytingLean.ClosingTheLoop.Semantics.MealyF","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Semantics/Mealy.lean","line":42,"family":"Semantics","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":144},"snippet":"def MealyF (I : Type u) (O : Type v) (X : Type w) :=\n  I ‚Üí X √ó O\n\n/-- A minimal coalgebra (in `Type`), enough to phrase the Mealy connection. -/","pos":{"x":0.6953972106488433,"y":0.7031128386667459},"pos3":{"x":0.5684908093986879,"y":0.8737860306271942,"z":0.7134564321065212}},{"id":"HeytingLean.ClosingTheLoop.Semantics.Coalgebra","name":"HeytingLean.ClosingTheLoop.Semantics.Coalgebra","kind":"structure","path":"lean/HeytingLean/ClosingTheLoop/Semantics/Mealy.lean","line":46,"family":"Semantics","features":{"implies":2,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":223},"snippet":"structure Coalgebra (F : Type w ‚Üí Type _) where\n  carrier : Type w\n  str : carrier ‚Üí F carrier\n\nnamespace Coalgebra\n","pos":{"x":0.6325334632703763,"y":0.6943248586894614},"pos3":{"x":0.5954344639792245,"y":0.8006585090977603,"z":0.6681644357437749}},{"id":"HeytingLean.ClosingTheLoop.Semantics.Coalgebra.ofMealy","name":"HeytingLean.ClosingTheLoop.Semantics.Coalgebra.ofMealy","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Semantics/Mealy.lean","line":55,"family":"Semantics","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":2,"tactics":0,"parenDepth":2,"length":186},"snippet":"def ofMealy (m : Mealy I O S) : Coalgebra (MealyF (I := I) (O := O)) where\n  carrier := S\n  str := fun s => fun i => m.step s i\n\n/-- Any coalgebra for `MealyF I O` is a Mealy machine. -/","pos":{"x":0.1653277150836985,"y":0.28810384306683556},"pos3":{"x":0.8147521071634255,"y":0.11106341024760907,"z":0.21299818124104758}},{"id":"HeytingLean.ClosingTheLoop.Semantics.Coalgebra.toMealy","name":"HeytingLean.ClosingTheLoop.Semantics.Coalgebra.toMealy","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Semantics/Mealy.lean","line":60,"family":"Semantics","features":{"implies":0,"not":0,"and":1,"or":0,"forall":0,"exists":0,"eq":1,"tactics":0,"parenDepth":3,"length":473},"snippet":"def toMealy (c : Coalgebra (MealyF (I := I) (O := O))) :\n    Mealy I O c.carrier where\n  step := fun s i => c.str s i\n\nend Coalgebra\n","pos":{"x":0.5098896513342235,"y":0.03463401740029308},"pos3":{"x":0.43241994275258067,"y":0.5820609692913721,"z":0.2801170374926885}},{"id":"HeytingLean.ClosingTheLoop.Semantics.MRBridge.closeMachine","name":"HeytingLean.ClosingTheLoop.Semantics.MRBridge.closeMachine","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Semantics/Mealy.lean","line":78,"family":"Semantics","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":2,"tactics":4,"parenDepth":3,"length":575},"snippet":"def closeMachine : Mealy PUnit (AdmissibleMap S) (Selector S) where\n  step Œ¶ _ :=\n    let Œ¶' := closeSelector S b RI Œ¶\n    (Œ¶', Œ¶' b)\n\n@[simp] lemma closeMachine_step_fst (Œ¶ : Selector S) :","pos":{"x":0.3674770672610695,"y":0.18672054266717786},"pos3":{"x":0.5854834404738593,"y":0.3162911362859141,"z":0.25489739583973325}},{"id":"HeytingLean.ClosingTheLoop.Semantics.MRBridge.closeMachine_state_closed","name":"HeytingLean.ClosingTheLoop.Semantics.MRBridge.closeMachine_state_closed","kind":"theorem","path":"lean/HeytingLean/ClosingTheLoop/Semantics/Mealy.lean","line":92,"family":"Semantics","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":1,"parenDepth":3,"length":351},"snippet":"theorem closeMachine_state_closed (Œ¶ : Selector S) :\n    MR.IsClosed S b RI ((closeMachine (S := S) (b := b) RI).step Œ¶ PUnit.unit).1 := by\n  -- `IsClosed` for the post-step state is exactly idempotence of `closeSelector`.\n  simp [closeMachine, MR.IsClosed, closeSelector.idem]\n\n/-- The closure loop stabilizes in one additional step (idempotence). -/","pos":{"x":0.24112607683606654,"y":0.03997294787416639},"pos3":{"x":0.6556107772693694,"y":0.20310962849809552,"z":0.07820940224162451}},{"id":"HeytingLean.ClosingTheLoop.Semantics.MRBridge.closeMachine_step_idem","name":"HeytingLean.ClosingTheLoop.Semantics.MRBridge.closeMachine_step_idem","kind":"theorem","path":"lean/HeytingLean/ClosingTheLoop/Semantics/Mealy.lean","line":98,"family":"Semantics","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":2,"parenDepth":1,"length":390},"snippet":"theorem closeMachine_step_idem (Œ¶ : Selector S) :\n    let m := closeMachine (S := S) (b := b) RI\n    m.step (m.step Œ¶ PUnit.unit).1 PUnit.unit = m.step Œ¶ PUnit.unit := by\n  intro m\n  -- both components stabilize: state by idempotence, output by evaluation-at-`b` stability\n  ext <;> simp [m, closeMachine, closeSelector.idem]","pos":{"x":0.8053704840079724,"y":0.41682305196518826},"pos3":{"x":0.37205381029851664,"y":0.7907817572991774,"z":0.6209654919884435}},{"id":"HeytingLean.ClosingTheLoop.Semantics.MeetRetraction","name":"HeytingLean.ClosingTheLoop.Semantics.MeetRetraction","kind":"structure","path":"lean/HeytingLean/ClosingTheLoop/Semantics/NucleusBridge.lean","line":29,"family":"Semantics","features":{"implies":2,"not":0,"and":0,"or":0,"forall":3,"exists":0,"eq":3,"tactics":0,"parenDepth":2,"length":558},"snippet":"structure MeetRetraction where\n  enc : Œ± ‚Üí Œ≤\n  dec : Œ≤ ‚Üí Œ±\n  /-- Section law: `enc (dec y) = y`. -/\n  enc_dec : Function.LeftInverse enc dec\n  /-- Inflationary law: `x ‚â§ dec (enc x)`. -/","pos":{"x":0.1621672129577185,"y":0.5537622905558213},"pos3":{"x":0.8719982323246203,"y":0.3229139899226897,"z":0.2305026224737668}},{"id":"HeytingLean.ClosingTheLoop.Semantics.MeetRetraction.retractionNucleus","name":"HeytingLean.ClosingTheLoop.Semantics.MeetRetraction.retractionNucleus","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Semantics/NucleusBridge.lean","line":46,"family":"Semantics","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":4,"tactics":5,"parenDepth":3,"length":843},"snippet":"def retractionNucleus : Nucleus Œ± where\n  toFun x := r.dec (r.enc x)\n  map_inf' x y := by\n    simp [r.enc_map_inf, r.dec_map_inf]\n  idempotent' x := by\n    -- `dec (enc (dec (enc x))) = dec (enc x)` by the section law.","pos":{"x":0.4147670924051219,"y":0.23629680320382906},"pos3":{"x":0.5424464399508383,"y":0.3829098843994389,"z":0.31917528969953407}},{"id":"HeytingLean.ClosingTheLoop.addClosureNucleus","name":"HeytingLean.ClosingTheLoop.addClosureNucleus","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Semantics/NucleusBridge.lean","line":75,"family":"addClosureNucleus","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":4,"tactics":13,"parenDepth":1,"length":687},"snippet":"def addClosureNucleus (U : Set œÉ) : Nucleus (Set œÉ) where\n  toFun S := S ‚à™ U\n  map_inf' S T := by\n    ext x\n    constructor\n    ¬∑ intro hx","pos":{"x":0.44440204967425256,"y":0.2963933364252428},"pos3":{"x":0.5229068503217285,"y":0.28562805547642056,"z":0.3872850426533618}},{"id":"HeytingLean.ClosingTheLoop.Semantics.nucleusOfClosure","name":"HeytingLean.ClosingTheLoop.Semantics.nucleusOfClosure","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Semantics/NucleusFixedPoints.lean","line":35,"family":"Semantics","features":{"implies":1,"not":0,"and":0,"or":0,"forall":3,"exists":0,"eq":2,"tactics":1,"parenDepth":2,"length":493},"snippet":"def nucleusOfClosure (close : Œ± ‚Üí Œ±)\n    (le_close : ‚àÄ x : Œ±, x ‚â§ close x)\n    (idem : ‚àÄ x : Œ±, close (close x) = close x)\n    (map_inf : ‚àÄ x y : Œ±, close (x ‚äì y) = close x ‚äì close y) :\n    Nucleus Œ± where\n  toFun := close","pos":{"x":0.1708781391995349,"y":0.5342094939850697},"pos3":{"x":0.8810880560737312,"y":0.3096973563565735,"z":0.2165065027006533}},{"id":"HeytingLean.ClosingTheLoop.Œ©","name":"HeytingLean.ClosingTheLoop.Œ©","kind":"abbrev","path":"lean/HeytingLean/ClosingTheLoop/Semantics/NucleusFixedPoints.lean","line":53,"family":"Œ©","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":0,"length":117},"snippet":"abbrev Œ© : Sublocale X :=\n  n.toSublocale\n\n/-- Membership in the closed part is equivalent to being a fixed point. -/","pos":{"x":0.981692389029145,"y":0.9525108715556232},"pos3":{"x":0.017180161880754285,"y":0.9043373638179445,"z":0.9731765965676843}},{"id":"HeytingLean.ClosingTheLoop.mem_Œ©_iff_fixed","name":"HeytingLean.ClosingTheLoop.mem_Œ©_iff_fixed","kind":"theorem","path":"lean/HeytingLean/ClosingTheLoop/Semantics/NucleusFixedPoints.lean","line":57,"family":"mem_Œ©_iff_fixed","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":4,"parenDepth":1,"length":240},"snippet":"theorem mem_Œ©_iff_fixed {x : X} : x ‚àà (n.toSublocale : Set X) ‚Üî n x = x := by\n  constructor\n  ¬∑ intro hx\n    rcases hx with ‚ü®y, rfl‚ü©\n    simp\n  ¬∑ intro hx","pos":{"x":0.7737793118242757,"y":0.3915834989420052},"pos3":{"x":0.3355225988025285,"y":0.7116867089090504,"z":0.6796488799609238}},{"id":"HeytingLean.ClosingTheLoop.Semantics.futureKernel","name":"HeytingLean.ClosingTheLoop.Semantics.futureKernel","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Semantics/PreorderTime.lean","line":45,"family":"Semantics","features":{"implies":0,"not":0,"and":0,"or":0,"forall":4,"exists":0,"eq":1,"tactics":0,"parenDepth":2,"length":199},"snippet":"def futureKernel (S : ‚àÄ t : T, Set (X.obj t)) : ‚àÄ t : T, Set (X.obj t) :=\n  fun t =>\n    {x | ‚àÄ t' : T, ‚àÄ h : t ‚â§ t', X.map (CategoryTheory.homOfLE h) x ‚àà S t'}\n\nnamespace futureKernel\n","pos":{"x":0.18247395613367656,"y":0.5000517713970432},"pos3":{"x":0.8643342744171327,"y":0.28107963347802206,"z":0.23257144425344056}},{"id":"HeytingLean.ClosingTheLoop.Semantics.futureKernel.monotone","name":"HeytingLean.ClosingTheLoop.Semantics.futureKernel.monotone","kind":"lemma","path":"lean/HeytingLean/ClosingTheLoop/Semantics/PreorderTime.lean","line":53,"family":"Semantics","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":1,"length":105},"snippet":"lemma monotone :\n    Monotone (futureKernel X) := by\n  intro S‚ÇÅ S‚ÇÇ hS t x hx t' h\n  exact hS _ (hx t' h)\n","pos":{"x":0.8573594420377046,"y":0.7234718499697196},"pos3":{"x":0.37516817123357327,"y":0.8794183697163519,"z":0.8242275254834396}},{"id":"HeytingLean.ClosingTheLoop.Semantics.futureKernel.contractive","name":"HeytingLean.ClosingTheLoop.Semantics.futureKernel.contractive","kind":"lemma","path":"lean/HeytingLean/ClosingTheLoop/Semantics/PreorderTime.lean","line":58,"family":"Semantics","features":{"implies":0,"not":0,"and":0,"or":0,"forall":1,"exists":0,"eq":0,"tactics":1,"parenDepth":2,"length":133},"snippet":"lemma contractive (S : ‚àÄ t : T, Set (X.obj t)) (t : T) :\n    futureKernel X S t ‚äÜ S t := by\n  intro x hx\n  simpa using hx t (le_rfl)\n","pos":{"x":0.09139951386729585,"y":0.422640152895975},"pos3":{"x":0.9101951020753457,"y":0.18505755278619831,"z":0.15345478650399214}},{"id":"HeytingLean.ClosingTheLoop.Semantics.futureKernel.map_homOfLE_trans_apply","name":"HeytingLean.ClosingTheLoop.Semantics.futureKernel.map_homOfLE_trans_apply","kind":"lemma","path":"lean/HeytingLean/ClosingTheLoop/Semantics/PreorderTime.lean","line":63,"family":"Semantics","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":7,"tactics":2,"parenDepth":2,"length":926},"snippet":"lemma map_homOfLE_trans_apply {t t' t'' : T} (ht' : t ‚â§ t') (ht'' : t' ‚â§ t'')\n    (x : X.obj t) :\n    X.map (CategoryTheory.homOfLE (le_trans ht' ht'')) x =\n      X.map (CategoryTheory.homOfLE ht'') (X.map (CategoryTheory.homOfLE ht') x) := by\n  have hhom :\n      (CategoryTheory.homOfLE (le_trans ht' ht'')) =","pos":{"x":0.39433547695196003,"y":0.31959709613613874},"pos3":{"x":0.5663191719162495,"y":0.3861600190304664,"z":0.3556610961794335}},{"id":"HeytingLean.ClosingTheLoop.Semantics.futureKernel.idem","name":"HeytingLean.ClosingTheLoop.Semantics.futureKernel.idem","kind":"lemma","path":"lean/HeytingLean/ClosingTheLoop/Semantics/PreorderTime.lean","line":81,"family":"Semantics","features":{"implies":0,"not":0,"and":0,"or":0,"forall":1,"exists":0,"eq":1,"tactics":5,"parenDepth":2,"length":761},"snippet":"lemma idem (S : ‚àÄ t : T, Set (X.obj t)) :\n    futureKernel X (futureKernel X S) = futureKernel X S := by\n  funext t\n  ext x\n  constructor\n  ¬∑ intro hx t' ht'","pos":{"x":0.3543425201584804,"y":0.24596565537329765},"pos3":{"x":0.5892558616671494,"y":0.23150010884601338,"z":0.3011478162517567}},{"id":"HeytingLean.ClosingTheLoop.Semantics.futureKernel.meet","name":"HeytingLean.ClosingTheLoop.Semantics.futureKernel.meet","kind":"lemma","path":"lean/HeytingLean/ClosingTheLoop/Semantics/PreorderTime.lean","line":98,"family":"Semantics","features":{"implies":0,"not":0,"and":0,"or":0,"forall":2,"exists":0,"eq":3,"tactics":9,"parenDepth":2,"length":622},"snippet":"lemma meet (S‚ÇÅ S‚ÇÇ : ‚àÄ t : T, Set (X.obj t)) :\n    futureKernel X (fun t => S‚ÇÅ t ‚à© S‚ÇÇ t) = fun t => futureKernel X S‚ÇÅ t ‚à© futureKernel X S‚ÇÇ t := by\n  funext t\n  ext x\n  constructor\n  ¬∑ intro hx","pos":{"x":0.40954215107286635,"y":0.356165258188207},"pos3":{"x":0.5616434328408821,"y":0.24017277560408684,"z":0.3541925038598167}},{"id":"HeytingLean.ClosingTheLoop.Semantics.unreachableFrom","name":"HeytingLean.ClosingTheLoop.Semantics.unreachableFrom","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Semantics/PreorderTime.lean","line":125,"family":"Semantics","features":{"implies":0,"not":1,"and":0,"or":0,"forall":1,"exists":1,"eq":2,"tactics":0,"parenDepth":2,"length":287},"snippet":"def unreachableFrom : ‚àÄ t : T, Set (X.obj t) :=\n  fun t =>\n    {x | ¬¨ ‚àÉ x0 : X.obj t‚ÇÄ, X.map (CategoryTheory.homOfLE (hBase t)) x0 = x}\n\n/-- A preorder-time `Nucleus` on time-indexed predicates: ‚Äútreat unreachable states as vacuously\nadmissible‚Äù by unioning them into every predicate. -/","pos":{"x":0.5385582430476998,"y":0.43317463201072814},"pos3":{"x":0.5408520593522551,"y":0.588815537301692,"z":0.48403664754945774}},{"id":"HeytingLean.ClosingTheLoop.Semantics.reachabilityNucleus","name":"HeytingLean.ClosingTheLoop.Semantics.reachabilityNucleus","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Semantics/PreorderTime.lean","line":131,"family":"Semantics","features":{"implies":0,"not":0,"and":0,"or":0,"forall":2,"exists":0,"eq":6,"tactics":14,"parenDepth":2,"length":980},"snippet":"def reachabilityNucleus : Nucleus (‚àÄ t : T, Set (X.obj t)) where\n  toFun S := fun t => S t ‚à™ unreachableFrom (X := X) t‚ÇÄ hBase t\n  map_inf' S T := by\n    funext t\n    ext x\n    constructor","pos":{"x":0.4319251189076968,"y":0.3157296654281533},"pos3":{"x":0.5476411257278918,"y":0.25219317534853986,"z":0.3414928403079632}},{"id":"HeytingLean.ClosingTheLoop.Semantics.unreachableFromBot","name":"HeytingLean.ClosingTheLoop.Semantics.unreachableFromBot","kind":"abbrev","path":"lean/HeytingLean/ClosingTheLoop/Semantics/PreorderTime.lean","line":166,"family":"Semantics","features":{"implies":0,"not":0,"and":0,"or":0,"forall":1,"exists":0,"eq":1,"tactics":0,"parenDepth":2,"length":204},"snippet":"abbrev unreachableFromBot : ‚àÄ t : T, Set (X.obj t) :=\n  unreachableFrom (X := X) (t‚ÇÄ := ‚ä•) (hBase := fun t => (bot_le : ‚ä• ‚â§ t))\n\n/-- Special case: reachability nucleus from the canonical base time `‚ä•`. -/","pos":{"x":0.13078371220398174,"y":0.39962933369716486},"pos3":{"x":0.8829538502869326,"y":0.1537771978407751,"z":0.1471356267343861}},{"id":"HeytingLean.ClosingTheLoop.Semantics.reachabilityNucleusBot","name":"HeytingLean.ClosingTheLoop.Semantics.reachabilityNucleusBot","kind":"abbrev","path":"lean/HeytingLean/ClosingTheLoop/Semantics/PreorderTime.lean","line":170,"family":"Semantics","features":{"implies":0,"not":0,"and":0,"or":0,"forall":1,"exists":0,"eq":1,"tactics":0,"parenDepth":2,"length":218},"snippet":"abbrev reachabilityNucleusBot : Nucleus (‚àÄ t : T, Set (X.obj t)) :=\n  reachabilityNucleus (X := X) (t‚ÇÄ := ‚ä•) (hBase := fun t => (bot_le : ‚ä• ‚â§ t))\n\nend Bot\n\nend Nucleus","pos":{"x":0.12893432583347522,"y":0.4091219481313937},"pos3":{"x":0.8622919165279633,"y":0.17704753812690874,"z":0.15776212647669305}},{"id":"HeytingLean.ClosingTheLoop.Semantics.ProcessBridge.KprocKernel","name":"HeytingLean.ClosingTheLoop.Semantics.ProcessBridge.KprocKernel","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Semantics/ProcessBridge.lean","line":28,"family":"Semantics","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":4,"parenDepth":1,"length":384},"snippet":"def KprocKernel : Kernel (Œ± := ProcSet) where\n  toFun := Kproc\n  monotone' := Kproc_monotone\n  map_inf' := by\n    intro S T\n    simpa [inf_eq_inter] using (Kproc_meet S T)","pos":{"x":0.7918258627376134,"y":0.3451426094001731},"pos3":{"x":0.3216361472309328,"y":0.7380156770024034,"z":0.6499363219706737}},{"id":"HeytingLean.ClosingTheLoop.Semantics.ProcessBridge.wellTyped_fixedPoint","name":"HeytingLean.ClosingTheLoop.Semantics.ProcessBridge.wellTyped_fixedPoint","kind":"theorem","path":"lean/HeytingLean/ClosingTheLoop/Semantics/ProcessBridge.lean","line":42,"family":"Semantics","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":0,"parenDepth":1,"length":205},"snippet":"theorem wellTyped_fixedPoint (Œì : ChanCtx) :\n    Kproc { P | WellTypedProc Œì P } = { P | WellTypedProc Œì P } :=\n  Kproc_wellTyped_eq Œì\n\nend ProcessBridge\n","pos":{"x":0.8319420445756986,"y":0.5402524629551912},"pos3":{"x":0.4184396340942969,"y":0.8547133858283736,"z":0.7315720322990197}},{"id":"HeytingLean.ClosingTheLoop.Semantics.ReachSystem","name":"HeytingLean.ClosingTheLoop.Semantics.ReachSystem","kind":"structure","path":"lean/HeytingLean/ClosingTheLoop/Semantics/RelationalRealizability.lean","line":36,"family":"Semantics","features":{"implies":4,"not":0,"and":0,"or":0,"forall":2,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":312},"snippet":"structure ReachSystem where\n  State : Type u\n  Reach : State ‚Üí State ‚Üí Prop\n  refl : ‚àÄ x, Reach x x\n  trans : ‚àÄ {x y z}, Reach x y ‚Üí Reach y z ‚Üí Reach x z\n","pos":{"x":0.6164275624747705,"y":0.732475468996816},"pos3":{"x":0.6531422177311754,"y":0.7786472280885453,"z":0.6665718511339124}},{"id":"HeytingLean.ClosingTheLoop.Semantics.ReachSystem.K","name":"HeytingLean.ClosingTheLoop.Semantics.ReachSystem.K","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Semantics/RelationalRealizability.lean","line":47,"family":"Semantics","features":{"implies":1,"not":0,"and":0,"or":0,"forall":1,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":74},"snippet":"def K (P : Set S.State) : Set S.State :=\n  {x | ‚àÄ y, S.Reach x y ‚Üí y ‚àà P}\n","pos":{"x":0.6625840085030319,"y":0.7612076624127867},"pos3":{"x":0.6288164084081509,"y":0.8354783359833224,"z":0.7164292648044401}},{"id":"HeytingLean.ClosingTheLoop.Semantics.ReachSystem.K_contract","name":"HeytingLean.ClosingTheLoop.Semantics.ReachSystem.K_contract","kind":"lemma","path":"lean/HeytingLean/ClosingTheLoop/Semantics/RelationalRealizability.lean","line":50,"family":"Semantics","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":1,"parenDepth":1,"length":96},"snippet":"lemma K_contract (P : Set S.State) : S.K P ‚äÜ P := by\n  intro x hx\n  simpa using hx x (S.refl x)\n","pos":{"x":0.8636713625465204,"y":0.733434839240095},"pos3":{"x":0.414744837909717,"y":0.90935409000496,"z":0.8398538504246159}},{"id":"HeytingLean.ClosingTheLoop.Semantics.ReachSystem.K_monotone","name":"HeytingLean.ClosingTheLoop.Semantics.ReachSystem.K_monotone","kind":"lemma","path":"lean/HeytingLean/ClosingTheLoop/Semantics/RelationalRealizability.lean","line":54,"family":"Semantics","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":1,"length":86},"snippet":"lemma K_monotone : Monotone S.K := by\n  intro P Q hPQ x hx y hy\n  exact hPQ (hx y hy)\n","pos":{"x":0.8430187931488087,"y":0.701005474374716},"pos3":{"x":0.3814775975107363,"y":0.8625163914602073,"z":0.8256917351122047}},{"id":"HeytingLean.ClosingTheLoop.Semantics.ReachSystem.K_idem","name":"HeytingLean.ClosingTheLoop.Semantics.ReachSystem.K_idem","kind":"lemma","path":"lean/HeytingLean/ClosingTheLoop/Semantics/RelationalRealizability.lean","line":58,"family":"Semantics","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":5,"parenDepth":1,"length":216},"snippet":"lemma K_idem (P : Set S.State) : S.K (S.K P) = S.K P := by\n  ext x\n  constructor\n  ¬∑ intro hx y hy\n    have hyK : y ‚àà S.K P := hx y hy\n    exact hyK y (S.refl y)","pos":{"x":0.7664954210512817,"y":0.3883209063316806},"pos3":{"x":0.3272579142687821,"y":0.6697331531454834,"z":0.6675741037457001}},{"id":"HeytingLean.ClosingTheLoop.Semantics.ReachSystem.K_meet","name":"HeytingLean.ClosingTheLoop.Semantics.ReachSystem.K_meet","kind":"lemma","path":"lean/HeytingLean/ClosingTheLoop/Semantics/RelationalRealizability.lean","line":67,"family":"Semantics","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":8,"parenDepth":1,"length":340},"snippet":"lemma K_meet (P Q : Set S.State) : S.K (P ‚à© Q) = S.K P ‚à© S.K Q := by\n  ext x\n  constructor\n  ¬∑ intro hx\n    refine And.intro ?_ ?_\n    ¬∑ intro y hy; exact (hx y hy).1","pos":{"x":0.7415213166245919,"y":0.3417916955069744},"pos3":{"x":0.3244994892310177,"y":0.6517642264112483,"z":0.6332273767661003}},{"id":"HeytingLean.ClosingTheLoop.Semantics.ReachSystem.kernel","name":"HeytingLean.ClosingTheLoop.Semantics.ReachSystem.kernel","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Semantics/RelationalRealizability.lean","line":78,"family":"Semantics","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":1,"length":341},"snippet":"def kernel : Kernel (Œ± := Set S.State) where\n  toFun := S.K\n  monotone' := S.K_monotone\n  map_inf' P Q := by\n    simpa [inf_eq_inter] using (S.K_meet P Q)\n  idempotent' P := by","pos":{"x":0.8326058423594738,"y":0.3806310030937303},"pos3":{"x":0.3503157839119389,"y":0.8345647468481665,"z":0.6379983911744925}},{"id":"HeytingLean.ClosingTheLoop.Semantics.ReachSystem.IsInvariant","name":"HeytingLean.ClosingTheLoop.Semantics.ReachSystem.IsInvariant","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Semantics/RelationalRealizability.lean","line":90,"family":"Semantics","features":{"implies":2,"not":0,"and":0,"or":0,"forall":1,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":83},"snippet":"def IsInvariant (P : Set S.State) : Prop :=\n  ‚àÄ ‚¶Éx y‚¶Ñ, S.Reach x y ‚Üí x ‚àà P ‚Üí y ‚àà P\n","pos":{"x":0.653649373156888,"y":0.7491521660229654},"pos3":{"x":0.6254247613236149,"y":0.791382867143731,"z":0.6903550605063793}},{"id":"HeytingLean.ClosingTheLoop.Semantics.ReachSystem.K_eq_of_invariant","name":"HeytingLean.ClosingTheLoop.Semantics.ReachSystem.K_eq_of_invariant","kind":"lemma","path":"lean/HeytingLean/ClosingTheLoop/Semantics/RelationalRealizability.lean","line":93,"family":"Semantics","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":4,"parenDepth":1,"length":446},"snippet":"lemma K_eq_of_invariant (P : Set S.State) (hInv : S.IsInvariant P) : S.K P = P := by\n  ext x\n  constructor\n  ¬∑ intro hx; exact S.K_contract P hx\n  ¬∑ intro hx y hy\n    exact hInv hy hx","pos":{"x":0.7875760483926547,"y":0.3605479290731509},"pos3":{"x":0.3371485850572109,"y":0.7309802633173204,"z":0.6407835032345764}},{"id":"HeytingLean.ClosingTheLoop.Semantics.Realizability.Simulation","name":"HeytingLean.ClosingTheLoop.Semantics.Realizability.Simulation","kind":"structure","path":"lean/HeytingLean/ClosingTheLoop/Semantics/RelationalRealizability.lean","line":110,"family":"Semantics","features":{"implies":4,"not":0,"and":1,"or":0,"forall":1,"exists":1,"eq":0,"tactics":0,"parenDepth":1,"length":226},"snippet":"structure Simulation (R : S‚ÇÅ.State ‚Üí S‚ÇÇ.State ‚Üí Prop) : Prop where\n  sim : ‚àÄ {x x' y}, R x y ‚Üí S‚ÇÅ.Reach x x' ‚Üí ‚àÉ y', S‚ÇÇ.Reach y y' ‚àß R x' y'\n\n/-- Existence-based realizability: `x` is realized by some `y ‚àà Q` related to it. -/","pos":{"x":0.5879839853904477,"y":0.5888612157179448},"pos3":{"x":0.584444591363298,"y":0.6669832102881081,"z":0.5586702858158499}},{"id":"HeytingLean.ClosingTheLoop.Semantics.Realizability.Realizable","name":"HeytingLean.ClosingTheLoop.Semantics.Realizability.Realizable","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Semantics/RelationalRealizability.lean","line":114,"family":"Semantics","features":{"implies":2,"not":0,"and":1,"or":0,"forall":0,"exists":1,"eq":0,"tactics":0,"parenDepth":1,"length":238},"snippet":"def Realizable (R : S‚ÇÅ.State ‚Üí S‚ÇÇ.State ‚Üí Prop) (Q : Set S‚ÇÇ.State) : Set S‚ÇÅ.State :=\n  {x | ‚àÉ y, R x y ‚àß y ‚àà Q}\n\n/-- If `Q` is invariant in the target system, then the realizable states form an invariant\npredicate in the source system. -/","pos":{"x":0.5749981071658727,"y":0.5280171651110388},"pos3":{"x":0.5590531940763496,"y":0.6377559167176926,"z":0.5197671464140065}},{"id":"HeytingLean.ClosingTheLoop.Semantics.Realizability.realizable_invariant_of_simulation","name":"HeytingLean.ClosingTheLoop.Semantics.Realizability.realizable_invariant_of_simulation","kind":"theorem","path":"lean/HeytingLean/ClosingTheLoop/Semantics/RelationalRealizability.lean","line":119,"family":"Semantics","features":{"implies":2,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":2,"length":551},"snippet":"theorem realizable_invariant_of_simulation\n    {R : S‚ÇÅ.State ‚Üí S‚ÇÇ.State ‚Üí Prop} (hSim : Simulation (S‚ÇÅ := S‚ÇÅ) (S‚ÇÇ := S‚ÇÇ) R)\n    {Q : Set S‚ÇÇ.State} (hInv : S‚ÇÇ.IsInvariant Q) :\n    S‚ÇÅ.IsInvariant (Realizable (S‚ÇÅ := S‚ÇÅ) (S‚ÇÇ := S‚ÇÇ) R Q) := by\n  intro x x' hx ‚ü®y, hRxy, hyQ‚ü©\n  rcases hSim.sim hRxy hx with ‚ü®y', hyReach, hRx'y'‚ü©","pos":{"x":0.571963636315781,"y":0.6804765948740941},"pos3":{"x":0.6415132807851186,"y":0.6884796878689794,"z":0.5953842469085593}},{"id":"HeytingLean.ClosingTheLoop.Semantics.Instances.processSystem","name":"HeytingLean.ClosingTheLoop.Semantics.Instances.processSystem","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Semantics/RelationalRealizability.lean","line":137,"family":"Semantics","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":0,"length":243},"snippet":"def processSystem : ReachSystem where\n  State := Proc\n  Reach := ReducesStar\n  refl := ReducesStar.refl\n  trans := by\n    intro x y z hxy hyz","pos":{"x":0.9957986927864992,"y":0.9795954936837549},"pos3":{"x":0.039372952586658905,"y":0.9107191122605576,"z":0.9706081329533696}},{"id":"HeytingLean.ClosingTheLoop.Tests.toyH","name":"HeytingLean.ClosingTheLoop.Tests.toyH","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Tests/ClosureIdempotent.lean","line":16,"family":"Tests","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":49},"snippet":"private def toyH : Set (Unit ‚Üí Bool) := Set.univ\n","pos":{"x":0.681886002052166,"y":0.7142649187301047},"pos3":{"x":0.5681495755051158,"y":0.8547067556738845,"z":0.7267309022959614}},{"id":"HeytingLean.ClosingTheLoop.Tests.toySystem","name":"HeytingLean.ClosingTheLoop.Tests.toySystem","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Tests/ClosureIdempotent.lean","line":18,"family":"Tests","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":3,"tactics":3,"parenDepth":1,"length":203},"snippet":"private def toySystem : MRSystem where\n  A := Unit\n  B := Bool\n  H := toyH\n  f := fun _ => true\n  hf := by simp [toyH]","pos":{"x":0.7575108810328547,"y":0.5430669701113017},"pos3":{"x":0.4005119609654423,"y":0.697161558251897,"z":0.7098493139422036}},{"id":"HeytingLean.ClosingTheLoop.Tests.mapTrue","name":"HeytingLean.ClosingTheLoop.Tests.mapTrue","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Tests/ClosureIdempotent.lean","line":28,"family":"Tests","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":1,"parenDepth":1,"length":91},"snippet":"private def mapTrue : AdmissibleMap toySystem := ‚ü®fun _ => true, by simp [toySystem, toyH]‚ü©","pos":{"x":0.812698722400829,"y":0.6445771791699823},"pos3":{"x":0.4118353176767127,"y":0.8204683233699864,"z":0.7985115779443697}},{"id":"HeytingLean.ClosingTheLoop.Tests.mapFalse","name":"HeytingLean.ClosingTheLoop.Tests.mapFalse","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Tests/ClosureIdempotent.lean","line":29,"family":"Tests","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":1,"parenDepth":1,"length":94},"snippet":"private def mapFalse : AdmissibleMap toySystem := ‚ü®fun _ => false, by simp [toySystem, toyH]‚ü©\n","pos":{"x":0.8136622140730365,"y":0.638593868739616},"pos3":{"x":0.3993108785812266,"y":0.8276743393309299,"z":0.7849557705108482}},{"id":"HeytingLean.ClosingTheLoop.Tests.toySelector","name":"HeytingLean.ClosingTheLoop.Tests.toySelector","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Tests/ClosureIdempotent.lean","line":31,"family":"Tests","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":3,"tactics":1,"parenDepth":1,"length":155},"snippet":"private def toySelector : Selector toySystem :=\n  ‚ü®fun b =>\n      match b with\n      | true => mapFalse\n      | false => mapTrue,\n    by simp [toySystem]‚ü©","pos":{"x":0.7685517500436859,"y":0.5746511789166715},"pos3":{"x":0.41691766453146095,"y":0.7270535177977793,"z":0.7106182228080223}},{"id":"HeytingLean.ClosingTheLoop.Tests.toyRI","name":"HeytingLean.ClosingTheLoop.Tests.toyRI","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Tests/ClosureIdempotent.lean","line":38,"family":"Tests","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":6,"tactics":4,"parenDepth":2,"length":871},"snippet":"private def toyRI (b : toySystem.B) : RightInverseAt toySystem b where\n  Œ≤ := fun g => ‚ü®fun _ => g, by simp [toySystem]‚ü©\n  right_inv := by\n    intro g\n    rfl\n","pos":{"x":0.41270744063859194,"y":0.249812813285537},"pos3":{"x":0.5402926046089466,"y":0.40000163804303934,"z":0.32881865546646083}},{"id":"HeytingLean.ClosingTheLoop.Tests.selConstTrue","name":"HeytingLean.ClosingTheLoop.Tests.selConstTrue","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Tests/Test_AssumptionMismatch.lean","line":21,"family":"Tests","features":{"implies":3,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":2,"tactics":1,"parenDepth":2,"length":129},"snippet":"private def selConstTrue : Bool ‚Üí {g : Unit ‚Üí Bool // g ‚àà (Set.univ : Set (Unit ‚Üí Bool))} :=\n  fun _ => ‚ü®fun _ => true, by simp‚ü©\n","pos":{"x":0.6283752365717473,"y":0.6676606181626785},"pos3":{"x":0.6127974897227637,"y":0.7195388515365545,"z":0.6457715985519723}},{"id":"HeytingLean.ClosingTheLoop.Tests.sysInjNotSurj","name":"HeytingLean.ClosingTheLoop.Tests.sysInjNotSurj","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Tests/Test_AssumptionMismatch.lean","line":24,"family":"Tests","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":2,"parenDepth":0,"length":182},"snippet":"private def sysInjNotSurj : MRSystem where\n  A := Unit\n  B := Bool\n  H := Set.univ\n  f := fun _ => true\n  hf := by simp","pos":{"x":1,"y":1},"pos3":{"x":0.06023525870870142,"y":0.9009132617168264,"z":0.9737586761563777}},{"id":"HeytingLean.ClosingTheLoop.Tests.mapTrue","name":"HeytingLean.ClosingTheLoop.Tests.mapTrue","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Tests/Test_AssumptionMismatch.lean","line":34,"family":"Tests","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":0,"length":77},"snippet":"private def mapTrue : AdmissibleMap sysInjNotSurj :=\n  sysInjNotSurj.Œ¶f true\n","pos":{"x":0.9739139551989492,"y":0.9574290123947455},"pos3":{"x":0.025861141231693488,"y":0.9062057059280438,"z":0.9988551494821969}},{"id":"HeytingLean.ClosingTheLoop.Tests.mapFalse","name":"HeytingLean.ClosingTheLoop.Tests.mapFalse","kind":"def","path":"lean/HeytingLean/ClosingTheLoop/Tests/Test_AssumptionMismatch.lean","line":37,"family":"Tests","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":1,"parenDepth":1,"length":98},"snippet":"private def mapFalse : AdmissibleMap sysInjNotSurj :=\n  ‚ü®fun _ => false, by simp [sysInjNotSurj]‚ü©\n","pos":{"x":0.8030948091002336,"y":0.6263979173886759},"pos3":{"x":0.3943771308682874,"y":0.8038749041493046,"z":0.7765388352610956}},{"id":"HeytingLean.ClosingTheLoop.Tests.mapFalse_ne_mapTrue","name":"HeytingLean.ClosingTheLoop.Tests.mapFalse_ne_mapTrue","kind":"theorem","path":"lean/HeytingLean/ClosingTheLoop/Tests/Test_AssumptionMismatch.lean","line":40,"family":"Tests","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":7,"tactics":8,"parenDepth":2,"length":592},"snippet":"private theorem mapFalse_ne_mapTrue : mapFalse ‚â† mapTrue := by\n  intro h\n  have hfun : (fun _ : Unit => false) = (fun _ : Unit => true) := by\n    simpa [mapFalse, mapTrue] using congrArg Subtype.val h\n  have : (false : Bool) = true := congrArg (fun f => f ()) hfun\n  cases this","pos":{"x":0.42373728666733185,"y":0.2712297788150075},"pos3":{"x":0.542756279118975,"y":0.35663506511593235,"z":0.3675236069429637}},{"id":"HeytingLean.ClosingTheLoop.Tests.evalAt_not_surjective","name":"HeytingLean.ClosingTheLoop.Tests.evalAt_not_surjective","kind":"theorem","path":"lean/HeytingLean/ClosingTheLoop/Tests/Test_AssumptionMismatch.lean","line":56,"family":"Tests","features":{"implies":0,"not":2,"and":0,"or":0,"forall":0,"exists":0,"eq":3,"tactics":8,"parenDepth":2,"length":908},"snippet":"private theorem evalAt_not_surjective : ¬¨ Function.Surjective (evalAt sysInjNotSurj true) := by\n  intro hsurj\n  rcases hsurj mapFalse with ‚ü®Œ¶, hŒ¶‚ü©\n  -- Since the selector space is a singleton, every selector evaluates to `mapTrue` at `b = true`.\n  have : evalAt sysInjNotSurj true Œ¶ = mapTrue := by\n    rcases Œ¶ with ‚ü®f, hf‚ü©","pos":{"x":0.5257943127535112,"y":0.28387288499747404},"pos3":{"x":0.49226376714974174,"y":0.5184358390153502,"z":0.43080974546959305}},{"id":"HeytingLean.ClosingTheLoop.Tests.{S","name":"HeytingLean.ClosingTheLoop.Tests.{S","kind":"example","path":"lean/HeytingLean/ClosingTheLoop/Tests/Test_AssumptionMismatch.lean","line":77,"family":"Tests","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":203},"snippet":"example {S : MRSystem} {b : S.B} (RI : RightInverseAt S b) :\n    Function.Surjective (evalAt S b) :=\n  RightInverseAt.evalAt_surjective (S := S) (b := b) RI\n\nend Tests\nend ClosingTheLoop","pos":{"x":0.8812674114521819,"y":0.5483054509204424},"pos3":{"x":0.41002582952281696,"y":0.9829373440032032,"z":0.730763959077887}}],"edges":[[0,3],[0,63],[0,140],[0,31],[0,93],[1,144],[1,124],[1,130],[1,126],[1,41],[2,17],[2,121],[2,83],[2,88],[2,104],[3,63],[3,140],[3,74],[3,31],[4,21],[4,80],[4,44],[4,57],[4,46],[5,25],[5,133],[5,54],[5,110],[5,135],[6,89],[6,60],[6,72],[6,49],[6,70],[7,18],[7,67],[7,129],[7,23],[7,19],[8,55],[8,56],[8,116],[8,15],[8,53],[9,95],[9,96],[9,64],[9,20],[9,68],[10,14],[10,118],[10,87],[10,114],[10,147],[11,45],[11,30],[11,148],[11,27],[11,119],[12,16],[12,117],[12,73],[12,50],[12,38],[13,115],[13,40],[13,85],[13,78],[13,106],[14,118],[14,87],[14,114],[14,147],[15,53],[15,116],[15,55],[15,56],[16,117],[16,73],[16,38],[16,50],[17,83],[17,121],[17,88],[17,104],[18,129],[18,23],[18,67],[18,37],[19,79],[19,24],[19,67],[19,61],[20,64],[20,96],[20,104],[20,95],[20,121],[21,44],[21,80],[21,46],[21,31],[22,69],[22,92],[22,35],[22,113],[22,82],[23,129],[23,37],[23,71],[24,61],[24,79],[24,123],[24,67],[25,110],[25,133],[25,135],[25,70],[26,28],[26,99],[26,33],[26,29],[26,120],[27,30],[27,122],[27,36],[27,119],[28,99],[28,33],[28,29],[28,120],[29,33],[29,120],[29,127],[30,119],[30,148],[30,45],[31,93],[31,46],[31,44],[31,58],[32,76],[32,48],[32,100],[32,45],[33,120],[33,99],[34,41],[34,139],[34,125],[34,138],[34,81],[35,69],[35,92],[35,113],[35,51],[36,122],[36,119],[37,129],[37,103],[37,71],[38,62],[38,73],[38,60],[39,65],[39,97],[39,47],[39,68],[39,131],[40,115],[40,85],[40,106],[40,78],[41,138],[41,126],[41,139],[41,125],[42,90],[42,82],[42,69],[42,142],[43,112],[43,109],[43,81],[43,145],[43,125],[44,46],[44,93],[45,148],[45,122],[46,93],[46,58],[47,65],[47,97],[47,101],[47,84],[48,76],[48,100],[48,57],[49,60],[49,89],[49,62],[49,72],[50,61],[50,117],[50,123],[51,69],[51,74],[51,98],[51,92],[52,134],[52,59],[52,105],[52,102],[52,146],[53,116],[53,55],[53,56],[54,133],[55,56],[55,116],[56,116],[57,143],[57,100],[58,93],[58,140],[59,105],[59,134],[59,102],[59,146],[60,62],[60,89],[61,123],[61,79],[62,73],[62,89],[63,98],[63,140],[63,74],[64,96],[64,104],[64,95],[65,84],[65,101],[65,97],[66,101],[66,108],[66,84],[67,129],[67,79],[68,131],[68,97],[69,92],[69,113],[70,135],[70,72],[71,103],[71,86],[71,94],[72,89],[73,117],[74,98],[75,94],[75,77],[75,86],[75,103],[76,100],[77,83],[77,94],[78,107],[78,85],[81,145],[81,125],[81,139],[81,112],[82,113],[82,142],[83,121],[83,88],[83,104],[84,101],[85,115],[85,107],[86,94],[86,103],[87,114],[87,118],[87,147],[87,141],[87,106],[88,121],[90,109],[91,136],[91,124],[91,144],[91,130],[92,113],[94,103],[95,96],[96,104],[97,131],[99,132],[100,143],[102,146],[102,105],[102,134],[104,121],[105,134],[105,146],[106,141],[106,147],[106,115],[109,112],[110,135],[110,133],[111,119],[111,148],[112,145],[112,125],[112,139],[114,147],[114,141],[114,118],[118,147],[118,141],[119,122],[120,127],[122,148],[124,144],[124,130],[124,126],[125,139],[125,145],[125,138],[126,138],[126,130],[126,139],[128,129],[130,144],[133,135],[134,146],[136,144],[137,148],[138,139],[139,145],[141,147]],"edgesSemantic":[]};
